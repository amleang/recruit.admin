webpackJsonp([1],{"+fmM":function(e,t){},"/vhZ":function(e,t){},"0Upf":function(e,t){},"4gEk":function(e,t){},"5vcU":function(e,t,a){e.exports=a.p+"static/media/newmsg.f9d783d.mp3"},"7d/K":function(e,t){},"7ob+":function(e,t){},"9czR":function(e,t){},D9kA:function(e,t){},Fd7s:function(e,t){},FlBu:function(e,t){},Fxcr:function(e,t){},GGXK:function(e,t){},IpoQ:function(e,t){},MDjY:function(e,t){},NHnr:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("IvJb"),l={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]};var i=a("C7Lr")({name:"App"},l,!1,function(e){a("q6K9")},null,null).exports,o=a("zO6J"),s=a("uAC3"),n=a.n(s),c={data:function(){return{captcha:"",form:{username:"",pwd:"",captcha:""}}},mounted:function(){this.captcha="/api/user/captcha"},methods:{change_captcha:function(){this.captcha="/api/user/captcha?"+Math.round(9999999999*Math.random())},login_handle:function(){var e=this;this.form.username?this.form.pwd?this.form.captcha?this.http.get("/api/user/login",{params:this.form}).then(function(t){200==t.code?e.$router.push({path:"/"}):e.$message.error(t.msg)}):this.$message({message:"请输入验证码！",type:"warning"}):this.$message({message:"请输入密码！",type:"warning"}):this.$message({message:"请输入登录名！",type:"warning"})}}},d={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"main"},[a("div",{staticClass:"login"},[a("div",{staticClass:"column sysTitle"},[e._v("System Title")]),e._v(" "),a("div",{staticClass:"column"},[a("div",{staticClass:"login-form"},[a("div",{staticClass:"form"},[a("div",{staticClass:"input"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.form.username,expression:"form.username"}],staticClass:"user",attrs:{type:"text",placeholder:"请输入账号名",maxlength:"20"},domProps:{value:e.form.username},on:{input:function(t){t.target.composing||e.$set(e.form,"username",t.target.value)}}})]),e._v(" "),a("div",{staticClass:"input"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.form.pwd,expression:"form.pwd"}],staticClass:"pwd",attrs:{type:"password",placeholder:"请输入密码"},domProps:{value:e.form.pwd},on:{input:function(t){t.target.composing||e.$set(e.form,"pwd",t.target.value)}}})]),e._v(" "),a("div",[a("div",{staticClass:"input",staticStyle:{width:"275px",float:"left","margin-top":"0","margin-right":"20px"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.form.captcha,expression:"form.captcha"}],staticClass:"check",attrs:{type:"text",placeholder:"请输入验证码",maxlength:"10"},domProps:{value:e.form.captcha},on:{input:function(t){t.target.composing||e.$set(e.form,"captcha",t.target.value)}}})]),e._v(" "),a("div",{staticStyle:{float:"left",height:"45px","margin-left":"-10px",width:"115px",background:"#ccc"}},[a("img",{staticStyle:{height:"40px","margin-top":"2px",cursor:"pointer"},attrs:{src:e.captcha},on:{click:e.change_captcha}})]),e._v(" "),a("div",{staticStyle:{clear:"both"}})]),e._v(" "),a("div",{staticClass:"btn-login",on:{click:e.login_handle}},[e._v("登录")])])])])])])},staticRenderFns:[]};var m=a("C7Lr")(c,d,!1,function(e){a("GGXK")},"data-v-c6b84792",null).exports,u=a("aAbh"),p=a.n(u),h=a("5vcU"),f=a.n(h),v=a("rVsN"),b=a.n(v),g=function(e,t){if(e){t||(t="yyyy-MM-dd");var a=new Date(e);/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(a.getFullYear()+"").substr(4-RegExp.$1.length)));var r={"M+":a.getMonth()+1,"d+":a.getDate(),"h+":a.getHours(),"m+":a.getMinutes(),"s+":a.getSeconds()};for(var l in r)if(new RegExp("("+l+")").test(t)){var i=r[l]+"";t=t.replace(RegExp.$1,1===RegExp.$1.length?i:_(i))}return t}return""};function _(e){return("00"+e).substr(e.length)}var y={data:function(){return{mpurl:f.a,mainDialog:!1,mainform:{oldpwd:"",pwd:"",repwd:""},user:{},title:"招工管理系统",conWidth:500,isCollapse:!1,activeMenu:"1",breadcrumbList:[],menuList:[],msgcount:0,settime:null,timenow:"",lastid:""}},mounted:function(){var e=this,t=n.a.get("recrit-ck");t?(this.user=JSON.parse(t),this.menuList=p.a,this.url_change_handle()):(this.$message.error("用户登录失效，请重新登录！"),setTimeout(function(){e.$router.push({path:"/login"})},2e3)),this.http.get("/api/home/systime").then(function(t){e.timenow=e.formatDate(t.data,"yyyy-MM-dd hh:mm:ss"),e.settimeHandle()})},methods:{formatDate:g,settimeHandle:function(){var e=this,t=this;t.settime=setInterval(function(){t.http.get("/api/home/getmsg?time="+e.timenow).then(function(e){console.log("msg=>",e),200==e.code&&(t.msgcount=e.count,e.data&&e.data.id!=t.lastid&&(t.lastid=e.data.id,t.$refs.audio.play(),t.$notify({title:"消息提示",dangerouslyUseHTMLString:!0,message:"<div>"+e.data.name+"</div><div>用户名:"+e.data.username+";手机号:"+e.data.phone+"</div>",position:"bottom-right"})))})},1e4)},pathtopvvist_handle:function(){this.$router.push({path:"/crm/wvisit"}),this.clear_msg_handle()},clear_msg_handle:function(){var e=this;console.log("clear"),window.clearInterval(this.settime),this.msgcount=0,this.lastid="",this.http.get("/api/home/systime").then(function(t){e.timenow=e.formatDate(t.data,"yyyy-MM-dd hh:mm:ss"),e.settimeHandle()})},update_pwd_handle:function(){this.mainDialog=!0},handle_Close:function(){this.mainDialog=!1},confirm_handle:function(){var e=this;if(this.mainform.oldpwd)if(this.mainform.pwd)if(this.mainform.repwd)if(this.mainform.pwd==this.mainform.repwd){var t=n.a.get("recrit-ck");if(console.log("cookie=>",t),t){this.user=JSON.parse(t);var a={id:this.user.id,oldpwd:this.mainform.oldpwd,pwd:this.mainform.pwd};this.http.post("/api/user/updpwd",a).then(function(t){200==t.code?(e.$message.success("密码修改成功,请重新登陆!"),e.mainDialog=!1,n.a.remove("recrit-ck"),setTimeout(function(){e.$router.push({path:"/login"})},2500)):e.$message.error(t.msg)})}else this.$message.error("用户登录失效，请重新登录！"),setTimeout(function(){e.$router.push({path:"/login"})},2e3)}else this.$message.error("两次密码不一致，请重新输入");else this.$message.error("请输入再次密码");else this.$message.error("请输入新密码");else this.$message.error("请输入旧密码")},url_change_handle:function(){var e=this;this.breadcrumbList=[];var t=this.$route.path;this.menuList.forEach(function(a,r){a.path==t?(e.activeMenu=a.id,"/"!=t&&e.breadcrumbList.push(a)):a.subList.forEach(function(r){r.path==t?(e.activeMenu=r.id,e.breadcrumbList.push(a),e.breadcrumbList.push(r)):r.subList&&r.subList.forEach(function(l){l.path==t&&(e.activeMenu=l.id,e.breadcrumbList.push(a),e.breadcrumbList.push(r),e.breadcrumbList.push(l))})})})},handleOpen:function(e,t){console.log(e,t)},handleClose:function(e,t){console.log(e,t)},handleSelect:function(e,t){if(1==t.length){var a=this.menuList.find(function(t){return t.id==e});this.activeMenu=e,this.$router.push({path:a.path}),a.id==this.menuList[0].id?this.breadcrumb=null:this.breadcrumb=a}else if(2==t.length){a=this.menuList.find(function(e){return e.id==t[0]}).subList.find(function(t){return t.id==e});this.activeMenu=t[1],this.breadcrumb=a,this.$router.push({path:a.path})}else{var r=this.menuList.find(function(e){return e.id==t[0]});if(r){var l=r.subList.find(function(e){return e.id==t[1]});if(l){a=l.subList.find(function(t){return t.id==e});this.activeMenu=e,this.breadcrumb=a,this.$router.push({path:a.path})}}}},menu_click:function(){var e=this;this.main_width(),this.isCollapse=!this.isCollapse,setTimeout(function(){e.isCollapse?e.title="招工":e.title="招工管理系统"},200)},main_width:function(){var e=this;setTimeout(function(){e.isCollapse?e.conWidth=document.documentElement.clientWidth-66:e.conWidth=document.documentElement.clientWidth-240},300)},breadcrumb_handle:function(e){var t=this;e?(this.activeMenu=this.menuList[0].id,this.breadcrumb=null,this.$router.push({path:e})):(this.menuList.forEach(function(e,a){e.path==t.breadcrumb.path?t.activeMenu=e.id:e.subList.forEach(function(e,a){e.path==t.breadcrumb.path&&(t.activeMenu=e.id)})}),this.$router.push({path:this.breadcrumb.path}))},login_out_handle:function(){var e=this;this.$confirm("确定要退出登录吗?","提示",{type:"warning"}).then(function(){n.a.remove("member"),e.$router.push({path:"/login"})}).catch(function(){})}},watch:{$route:function(e,t){console.log("to=>",e),"/crm/wvisit"==e.fullPath&&this.clear_msg_handle(),this.url_change_handle()}}},x={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"main"},[a("div",{staticClass:"nav-left"},[a("div",{staticClass:"nav-login"},[e._v("\n      "+e._s(e.title)+"\n    ")]),e._v(" "),a("el-menu",{staticClass:"jart-el-menu",attrs:{"default-active":""+e.activeMenu,"unique-opened":!0,collapse:e.isCollapse,"background-color":"#001529","text-color":"hsla(0,0%,100%,.65)","active-text-color":"#ffd04b"},on:{select:e.handleSelect}},[e._l(e.menuList,function(t,r){return[0==t.subList.length?a("el-menu-item",{key:r,attrs:{index:""+t.id}},[a("i",{class:"iconfont "+t.icon}),e._v(" "),a("span",{attrs:{slot:"title"},slot:"title"},[e._v(e._s(t.name))])]):a("el-submenu",{key:r,attrs:{index:""+t.id}},[a("template",{slot:"title"},[a("i",{class:"iconfont "+t.icon}),e._v(" "),a("span",[e._v(e._s(t.name))])]),e._v(" "),e._l(t.subList,function(t,r){return[t.subList?a("el-submenu",{key:r,attrs:{index:""+t.id}},[a("span",{attrs:{slot:"title"},slot:"title"},[e._v(e._s(t.name))]),e._v(" "),e._l(t.subList,function(t,r){return a("el-menu-item",{key:r,attrs:{index:""+t.id}},[e._v(e._s(t.name))])})],2):a("el-menu-item",{key:r,attrs:{index:""+t.id}},[e._v("\n              "+e._s(t.name)+"\n            ")])]})],2)]})],2)],1),e._v(" "),a("div",{staticClass:"nav-main"},[a("div",{staticClass:"layout-header"},[a("i",{class:"top-menu iconfont icon-fenlei "+(e.isCollapse?"icon_tra":"icon_tra_out"),staticStyle:{display:"inline-block"},on:{click:e.menu_click}}),e._v(" "),a("audio",{ref:"audio",attrs:{src:e.mpurl}}),e._v(" "),a("div",{staticClass:"head-right"},[e._m(0),e._v(" "),a("span",{staticStyle:{margin:"0 10px"}},[e._v(e._s(e.user.username))]),e._v(" "),a("div",{staticClass:"head-ul"},[a("div",{staticClass:"tool-menu"},[a("div",{staticClass:"menu-item",on:{click:e.update_pwd_handle}},[a("i",{staticClass:"iconfont icon-mima"}),e._v("\n              修改密码\n            ")]),e._v(" "),a("div",{staticClass:"menu-item",on:{click:e.login_out_handle}},[a("i",{staticClass:"iconfont icon-tuichu"}),e._v("\n              退出登录")])])])]),e._v(" "),a("div",{staticStyle:{float:"right"}},[a("span",{staticClass:"remind",on:{click:e.pathtopvvist_handle}},[a("el-badge",{staticClass:"item",attrs:{value:e.msgcount,max:99}},[a("el-button",{attrs:{size:"small"}},[a("i",{staticClass:" iconfont icon-remind"})])],1)],1)])]),e._v(" "),a("div",{staticClass:"layout-map"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("主页")]),e._v(" "),e._l(e.breadcrumbList,function(t,r){return a("el-breadcrumb-item",{key:r},[e._v(e._s(t.name))])})],2)],1),e._v(" "),a("div",{staticClass:"layout-content"},[a("router-view")],1)]),e._v(" "),a("el-dialog",{attrs:{title:"修改密码",visible:e.mainDialog,top:"20vh",width:"600px","append-to-body":"","close-on-click-modal":!1,"before-close":e.handle_Close},on:{"update:visible":function(t){e.mainDialog=t}}},[a("el-form",{ref:"mainform",attrs:{model:e.mainform,"label-width":"150px"}},[a("el-form-item",{attrs:{label:"旧密码",prop:"username"}},[a("el-input",{staticStyle:{width:"300px"},attrs:{type:"password",size:"small",maxlength:"50",placeholder:"请输入旧密码"},model:{value:e.mainform.oldpwd,callback:function(t){e.$set(e.mainform,"oldpwd",t)},expression:"mainform.oldpwd"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"新密码",prop:"username"}},[a("el-input",{staticStyle:{width:"300px"},attrs:{type:"password",size:"small",maxlength:"50",placeholder:"请输入新密码"},model:{value:e.mainform.pwd,callback:function(t){e.$set(e.mainform,"pwd",t)},expression:"mainform.pwd"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"再次密码",prop:"username"}},[a("el-input",{staticStyle:{width:"300px"},attrs:{type:"password",size:"small",maxlength:"50",placeholder:"请输入再次密码"},model:{value:e.mainform.repwd,callback:function(t){e.$set(e.mainform,"repwd",t)},expression:"mainform.repwd"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.handle_Close}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.confirm_handle}},[e._v("确认")])],1)],1)],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("span",[t("i",{staticClass:"account iconfont icon-ICON_MGD"})])}]};var w=a("C7Lr")(y,x,!1,function(e){a("q6aV"),a("XVWo")},"data-v-48fd7028",null).exports,k={data:function(){return{tableHeight:500,form:{}}},mounted:function(){var e=this;this.tableHeight=document.documentElement.clientHeight-210+55,this.http.get("/api/home/report").then(function(t){200==t.code?(e.form=t.data,e.userChart_handle(t.data),e.recruitChart_handle(t.data),e.enrollChart_handle(t.data)):e.$message.error(t.msg)})},methods:{userChart_handle:function(e){var t=[],a=[],r=[];e.userlist.forEach(function(e){t.push(e.createAt)}),e.userreglist.forEach(function(e){-1==t.indexOf(e.createAt)&&t.push(e.createAt)}),t.sort(function(e,t){return Date.parse(e)-Date.parse(t)}),t.forEach(function(t){var l=e.userlist.filter(function(e){return e.createAt==t}),i=e.userreglist.filter(function(e){return e.createAt==t});0==l.length?a.push(0):a.push(l[0].count),0==i.length?r.push(0):r.push(i[0].count)}),this.$echarts.init(document.getElementById("userChart")).setOption({color:["#3398DB","#f00"],tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{data:["获取信息","注册"]},xAxis:{data:t},yAxis:{},series:[{name:"获取信息",type:"bar",data:a},{name:"注册",type:"bar",data:r}]})},recruitChart_handle:function(e){var t=[],a=[];e.recuritlist.forEach(function(e){t.push(e.createAt),a.push(e.count)}),this.$echarts.init(document.getElementById("recruitChart")).setOption({color:["#3398DB"],tooltip:{},xAxis:{data:t},yAxis:{},series:[{name:"数量",type:"bar",data:a}]})},enrollChart_handle:function(e){var t=[],a=[];e.enrolllist.forEach(function(e){t.push(e.createAt),a.push(e.count)}),this.$echarts.init(document.getElementById("enrollChart")).setOption({color:["#3398DB"],tooltip:{},xAxis:{data:t},yAxis:{},series:[{name:"人数",type:"bar",data:a}]})}}},$={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{style:"height:"+e.tableHeight+"px"},[a("el-card",[a("div",{attrs:{slot:"header"},slot:"header"},[a("span",[e._v("数据汇总")])]),e._v(" "),a("div",{staticClass:"num-total"},[a("el-row",[a("el-col",{attrs:{span:8}},[a("div",{staticClass:"title"},[e._v("会员数")]),e._v(" "),a("div",{staticClass:"num"},[e._v("已注册:"),a("span",[e._v(e._s(e.form.usercount))]),e._v(";未注册："),a("span",[e._v(e._s(e.form.userregcount))])])]),e._v(" "),a("el-col",{attrs:{span:8}},[a("div",{staticClass:"title"},[e._v("招工信息")]),e._v(" "),a("div",{staticClass:"num"},[e._v("开启:"),a("span",[e._v(e._s(e.form.recruitocount))]),e._v(";关闭:"),a("span",[e._v(e._s(e.form.recruitccount))])])]),e._v(" "),a("el-col",{attrs:{span:8}},[a("div",{staticClass:"title"},[e._v("报名数")]),e._v(" "),a("div",{staticClass:"num"},[a("span",[e._v(e._s(e.form.enrollcount))])])])],1)],1)]),e._v(" "),a("el-card",{staticStyle:{"margin-top":"30px"}},[a("div",{attrs:{slot:"header"},slot:"header"},[a("span",[e._v("最近一周会员")])]),e._v(" "),a("div",{style:{width:"100%",height:"300px"},attrs:{id:"userChart"}})]),e._v(" "),a("el-card",{staticStyle:{"margin-top":"30px"}},[a("div",{attrs:{slot:"header"},slot:"header"},[a("span",[e._v("最近一周发布招工")])]),e._v(" "),a("div",{style:{width:"100%",height:"300px"},attrs:{id:"recruitChart"}})]),e._v(" "),a("el-card",{staticStyle:{"margin-top":"30px"}},[a("div",{attrs:{slot:"header"},slot:"header"},[a("span",[e._v("最近一周报名")])]),e._v(" "),a("div",{style:{width:"100%",height:"300px"},attrs:{id:"enrollChart"}})])],1)},staticRenderFns:[]};var C=a("C7Lr")(k,$,!1,function(e){a("i+6q")},"data-v-115180f6",null).exports,F={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("div"),this._v(" "),t("router-view")],1)},staticRenderFns:[]};var S=a("C7Lr")({},F,!1,function(e){a("4gEk")},null,null).exports,q=a("ZLEe"),z=a.n(q),D={props:{id:{type:Number,default:0},formDialog:{type:Boolean,default:!1}},data:function(){return{entList:[],form:{id:0,username:"",relname:"",active:1,role:2,invitationCode:""},rules:{username:[{required:!0,message:"请输入用户名"}],relname:[{required:!0,message:"请输入真实姓名"}],active:[{required:!0,message:"请设置状态"}],role:[{required:!0,message:"请选择角色"}]}}},methods:{handle_Close:function(){this.$refs.form.resetFields(),this.$emit("dialogHandle",{dialog:!1,isreload:!1})},confirm_handle:function(){var e=this;this.$refs.form.validate(function(t){t&&(0==e.id?e.http.post("/api/user",e.form).then(function(t){200==t.code?(e.$emit("dialogHandle",{dialog:!1,isreload:!0}),e.$message.success("添加成功!"),e.$refs.form.resetFields()):e.$message.error(t.msg)}):e.http.put("/api/user",e.form).then(function(t){200==t.code?(e.$emit("dialogHandle",{dialog:!1,isreload:!0}),e.$message.success("修改成功!"),e.$refs.form.resetFields()):e.$message.error(t.msg)}))})}},watch:{formDialog:function(){var e=this;this.formDialog&&(0==this.id?this.form={id:0,username:"",relname:"",active:1,role:2,invitationCode:""}:this.http.get("/api/user/"+this.id).then(function(t){200==t.code&&(e.form=t.data)}))}}},P={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:"用户表单",visible:e.formDialog,top:"20vh",width:"600px","append-to-body":"","close-on-click-modal":!1,"before-close":e.handle_Close},on:{"update:visible":function(t){e.formDialog=t}}},[a("el-form",{ref:"form",attrs:{rules:e.rules,model:e.form,"label-width":"150px"}},[a("el-form-item",{attrs:{label:"用户名",prop:"username"}},[a("el-input",{staticStyle:{width:"300px"},attrs:{size:"small",disabled:0!=e.form.id,maxlength:"50",placeholder:"请输入用户名"},model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"真实姓名",prop:"relname"}},[a("el-input",{staticStyle:{width:"300px"},attrs:{size:"small",maxlength:"50",placeholder:"请输入真实姓名"},model:{value:e.form.relname,callback:function(t){e.$set(e.form,"relname",t)},expression:"form.relname"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"状态",prop:"active"}},[a("el-select",{staticStyle:{width:"300px"},attrs:{size:"small",placeholder:"--请选择--"},model:{value:e.form.active,callback:function(t){e.$set(e.form,"active",t)},expression:"form.active"}},[a("el-option",{attrs:{label:"启用",value:1}}),e._v(" "),a("el-option",{attrs:{label:"禁用",value:0}})],1)],1),e._v(" "),0==e.form.id?a("el-form-item",{attrs:{label:"角色",prop:"role"}},[a("el-select",{staticStyle:{width:"300px"},attrs:{size:"small",placeholder:"--请选择--"},model:{value:e.form.role,callback:function(t){e.$set(e.form,"role",t)},expression:"form.role"}},[a("el-option",{attrs:{label:"管理员",value:1}}),e._v(" "),a("el-option",{attrs:{label:"推销员",value:2}})],1)],1):e._e(),e._v(" "),0!=e.id&&2==e.form.role?a("el-form-item",{attrs:{label:"邀请码"}},[a("el-input",{staticStyle:{width:"300px"},attrs:{disabled:"",size:"small"},model:{value:e.form.invitationCode,callback:function(t){e.$set(e.form,"invitationCode",t)},expression:"form.invitationCode"}})],1):e._e()],1),e._v(" "),0==e.id&&1==e.form.role?a("div",{staticStyle:{padding:"0px 150px",color:"#f00"}},[e._v("初始密码为“123”")]):e._e(),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.handle_Close}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.confirm_handle}},[e._v("确认")])],1)],1)},staticRenderFns:[]};var E=a("C7Lr")(D,P,!1,function(e){a("oe1/")},null,null).exports,N=a("psq8"),A=a.n(N),L={components:{detailForm:E},data:function(){return{searchForm:{username:"",active:"",role:""},queryParams:{},table:{action:"/api/user",heads:[{prop:"id",label:"id",type:"data"},{prop:"username",label:"用户名称",type:"data"},{prop:"relname",label:"真实名称",type:"data"},{prop:"role",label:"角色",type:"comps",tplName:"tprole"},{prop:"active",label:"状态",type:"comps",tplName:"tpactive"},{prop:"invitationCode",label:"邀请码",type:"data"},{prop:"createAt",label:"创建时间",type:"time"},{prop:"operation",label:"操作",type:"comps",tplName:"toperation",width:280}]},formDialog:!1,currid:0}},methods:{query_handle:function(){var e=this;z()(this.searchForm).forEach(function(t){e.searchForm[t]?e.$set(e.queryParams,t,e.searchForm[t]):delete e.queryParams[t]}),this.$refs.table.reload()},add_handle:function(){this.currid=0,this.formDialog=!0},editor_handle:function(e){this.currid=e.id,this.formDialog=!0},del_handle:function(e){var t=this;this.$confirm("确定要删除该用户吗, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.http.delete("/api/user/"+e.id).then(function(e){(e.code=200)?(t.$message.success("删除成功！"),t.$refs.table.reload()):t.$message.error(e.msg)})}).catch(function(){})},enable_handle:function(e,t){var a=this,r=A.a.assign({},e);delete r.createAt,r.active=t,this.http.put("/api/user",r).then(function(r){200==r.code?e.active=t:a.$message.error(r.msg)})},dialog_handle:function(e){this.formDialog=e.dialog,e.isreload&&this.$refs.table.reload()},repwd_handle:function(e){var t=this;this.$prompt("请输入您要重置的密码","提示",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/^[\s\S]*.*[^\s][\s\S]*$/,inputErrorMessage:"请输入密码"}).then(function(a){var r=a.value,l={id:e.id,pwd:r};t.http.post("/api/user/resetpwd",l).then(function(e){200==e.code?t.$message.success("密码重置成功！"):t.$message.error(e.msg)})}).catch(function(){})}}},R={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("base-query",{on:{queryhandle:e.query_handle}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:3}},[a("div",{staticClass:"search-title"},[e._v("状态")])]),e._v(" "),a("el-col",{attrs:{span:9}},[a("el-select",{attrs:{size:"small",clearable:"",placeholder:"请选择状态"},model:{value:e.searchForm.active,callback:function(t){e.$set(e.searchForm,"active",t)},expression:"searchForm.active"}},[a("el-option",{attrs:{label:"全部",value:""}}),e._v(" "),a("el-option",{attrs:{label:"启动",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"禁用",value:"0"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:3}},[a("div",{staticClass:"search-title"},[e._v("用户名称")])]),e._v(" "),a("el-col",{attrs:{span:9}},[a("el-input",{staticStyle:{width:"300px"},attrs:{size:"small",placeholder:"请输入用户名称"},model:{value:e.searchForm.username,callback:function(t){e.$set(e.searchForm,"username",t)},expression:"searchForm.username"}})],1)],1),e._v(" "),a("el-row",{staticStyle:{"margin-top":"10px"},attrs:{gutter:20}},[a("el-col",{attrs:{span:3}},[a("div",{staticClass:"search-title"},[e._v("角色")])]),e._v(" "),a("el-col",{attrs:{span:9}},[a("el-select",{attrs:{size:"small",clearable:"",placeholder:"请选择状态"},model:{value:e.searchForm.role,callback:function(t){e.$set(e.searchForm,"role",t)},expression:"searchForm.role"}},[a("el-option",{attrs:{label:"全部",value:""}}),e._v(" "),a("el-option",{attrs:{label:"管理员",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"推销员",value:"2"}})],1)],1)],1)],1),e._v(" "),a("base-table",{ref:"table",attrs:{tableName:"用户列表",action:e.table.action,columns:e.table.heads,queryParams:e.queryParams},scopedSlots:e._u([{key:"default",fn:function(t){return["tpactive"==t.tplName?a("div",[e._v("\n        "+e._s(1==t.row.active?"启用":"禁用")+"\n      ")]):e._e(),e._v(" "),"tprole"==t.tplName?a("div",[e._v("\n        "+e._s(1==t.row.role?"管理员":"推销员")+"\n      ")]):e._e(),e._v(" "),"toperation"==t.tplName?a("div",[1==t.row.active?a("el-button",{attrs:{size:"small",type:"warning"},on:{click:function(a){e.enable_handle(t.row,0)}}},[e._v("禁用")]):a("el-button",{attrs:{size:"small",type:"success"},on:{click:function(a){e.enable_handle(t.row,1)}}},[e._v("启用")]),e._v(" "),1==t.row.role?a("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-refresh"},on:{click:function(a){e.repwd_handle(t.row)}}},[e._v("重置密码")]):e._e(),e._v(" "),1!=t.row.role?a("el-button",{attrs:{size:"small",icon:"el-icon-edit",type:"primary"},on:{click:function(a){e.editor_handle(t.row)}}},[e._v("编辑\n        ")]):e._e(),e._v(" "),1!=t.row.role?a("el-button",{attrs:{size:"small",icon:"el-icon-delete",type:"danger"},on:{click:function(a){e.del_handle(t.row)}}},[e._v("删除\n        ")]):e._e()],1):e._e()]}}])},[a("div",{attrs:{slot:"button"},slot:"button"},[a("el-button",{attrs:{size:"small",icon:"el-icon-plus",type:"success"},on:{click:e.add_handle}},[e._v("添加")])],1)]),e._v(" "),a("detail-form",{attrs:{formDialog:e.formDialog,id:e.currid},on:{dialogHandle:e.dialog_handle}})],1)},staticRenderFns:[]};var H=a("C7Lr")(L,R,!1,function(e){a("x2NK")},null,null).exports,T=a("lC5x"),B=a.n(T),M=a("J0Oq"),U=a.n(M),O={props:{form:{type:Object,default:function(){return{link:"",phone:phone,default:!1}}},index:{type:Number,default:0}},data:function(){return{rules:{link:[{required:!0,message:"请输入联系人",trigger:"blur"}],phone:[{required:!0,message:"请输入联系人电话",trigger:"blur"}]}}},methods:{change_handle:function(e){e&&this.$emit("linkChange",this.index)},del_handle:function(){this.$emit("delHandle",this.index)},validateFun:function(){var e=this;return new b.a(function(t,a){e.$refs.linkform.validate(function(e){t(e)})})}}},j={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form",{ref:"linkform",attrs:{inline:!0,rules:e.rules,model:e.form,"label-width":"150px"}},[a("el-form-item",{attrs:{label:"联系人",prop:"link"}},[a("el-input",{attrs:{size:"small",placeholder:"请输入联系人"},model:{value:e.form.link,callback:function(t){e.$set(e.form,"link",t)},expression:"form.link"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"联系人电话",prop:"phone"}},[a("el-input",{attrs:{size:"small",placeholder:"请输入联系人电话"},model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone",t)},expression:"form.phone"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini"},on:{click:e.del_handle}},[e._v("删除")])],1)],1)],1)},staticRenderFns:[]};var I=a("C7Lr")(O,j,!1,function(e){a("7ob+")},null,null).exports,V=a("HGBG"),K=[["bold","italic","underline","strike","link",{header:[1,2,3,4,5,6,!1]}],[{list:"ordered"},{list:"bullet"}],[{color:[]},{background:[]}],[{align:""},{align:"right"},{align:"center"},{align:"justify"}]],Q={props:{edit:{type:String,default:""},height:{type:Number,default:0}},components:{VueEditor:V.VueEditor},mounted:function(){this.content=this.edit},data:function(){return{content:"",editorSettings:{placeholder:"",theme:"snow",modules:{toolbar:{container:K}}}}},watch:{content:function(){this.$emit("changeedit",this.content)},edit:function(){this.content=this.edit}}},X={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"vue-edit"},[a("vue-editor",{ref:"vueeditor",staticStyle:{"line-height":"0px !important"},attrs:{editorOptions:e.editorSettings},model:{value:e.content,callback:function(t){e.content=t},expression:"content"}})],1)])},staticRenderFns:[]};var Z=a("C7Lr")(Q,X,!1,function(e){a("TUy2")},null,null).exports,G=[["bold","italic","underline","strike","link",{header:[1,2,3,4,5,6,!1]}],[{list:"ordered"},{list:"bullet"}],[{color:[]},{background:[]}],[{align:""},{align:"right"},{align:"center"},{align:"justify"}],["image"]],W=null,J={props:{edit:{type:String,default:""},height:{type:Number,default:0}},components:{VueEditor:V.VueEditor},mounted:function(){this.content=this.edit},data:function(){return{content:"",editorSettings:{placeholder:"",theme:"snow",modules:{toolbar:{container:G,handlers:{image:function(e){console.log("ele"),e?document.querySelector("#quill-upload input").click():this.quill.format("image",!1)}}}}}}},methods:{beforeAvatarUpload:function(e){var t="image/jpeg,image/png,image/gif".indexOf(e.type)>-1;return t?(W=this.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"}),t):(this.$message.error("Upload image can only be JPG format！"),t)},handleAvatarSuccess:function(e,t){if(200==e.code){var a=this.$refs.vueeditor.quill,r=a.getSelection().index;a.insertEmbed(r,"image","http://www.szdejurenhe.com"+e.data),a.setSelection(r+1)}else this.$message.error(e.msg);W.close()}},watch:{content:function(){this.$emit("changeedit",this.content)},edit:function(){this.content=this.edit}}},Y={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"vue-edit"},[a("vue-editor",{ref:"vueeditor",staticStyle:{"line-height":"0px !important"},attrs:{editorOptions:e.editorSettings},model:{value:e.content,callback:function(t){e.content=t},expression:"content"}}),e._v(" "),a("el-upload",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],staticClass:"avatar-uploader",attrs:{id:"quill-upload",multiple:"",accept:"image/*",action:"/api/upload","show-file-list":!1,"on-success":e.handleAvatarSuccess,"before-upload":e.beforeAvatarUpload}})],1)])},staticRenderFns:[]};var ee=null,te={components:{linkForm:I,VueEditor:Z,VueEditor2:a("C7Lr")(J,Y,!1,function(e){a("Fd7s")},null,null).exports},data:function(){return{form:{id:0,coName:"",address:"",platPhone:"",links:[{link:"",phone:"",default:!1}],attention:"",abstract:"",lat:"",lng:"",cover:"",qrcode:"",ver:"",downloadname:""},markersArray:[],tableHeight:500}},mounted:function(){var e,t=this;this.tableHeight=document.documentElement.clientHeight-200,(e="DE2BZ-47CRU-5LPVV-BXXAB-MWLRQ-D7FXQ",new b.a(function(t,a){window.init=function(){t(qq)};var r=document.createElement("script");r.type="text/javascript",r.src="http://map.qq.com/api/js?v=2.exp&callback=init&key="+e,r.onerror=a,document.head.appendChild(r)})).then(function(e){var a="31.27620345",r="120.59967041";t.http.get("/api/co/").then(function(l){200==l.code?l.data.length>0&&(t.form=l.data[0],a=t.form.lat,r=t.form.lng):t.$message.error(l.msg),console.log("form=>",{lat:a,lng:r});var i=new e.maps.Map(document.getElementById("container"),{center:new e.maps.LatLng(a,r),zoom:8});if(t.form.lat&&t.form.lng){console.log("true");var o=new e.maps.Marker({position:new e.maps.LatLng(a,r),animation:e.maps.MarkerAnimation.DROP,map:i});t.markersArray.push(o)}e.maps.event.addListener(i,"click",function(a){t.markersArray&&t.markersArray.forEach(function(e){e.setMap(null)}),t.markersArray=[],t.form.lat=a.latLng.lat,t.form.lng,a.latLng.lng;var r=new e.maps.Marker({position:a.latLng,animation:e.maps.MarkerAnimation.DROP,map:i});t.markersArray.push(r)})})})},methods:{add_link_handle:function(){this.form.links.push({link:"",phone:"",default:!1})},link_del_handle:function(e){this.form.links.length>1?this.form.links.splice(e,1):this.$message.warning("至少保留一个联系人！")},link_change_handle:function(e){this.form.links.forEach(function(t,a){t.default=a==e?1:0})},handleAvatarSuccess:function(e,t,a){200==e.code?"cover"==a?this.form.cover=e.data:this.form.qrcode=e.data:this.$message.error(e.msg),ee.close()},beforeAvatarUpload:function(e){var t="image/jpeg,image/png".indexOf(e.type)>-1;return t?(ee=this.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"}),t):(this.$message.error("上传的图片只能是jpg,png格式！"),t)},btn_save:function(){var e=this;return U()(B.a.mark(function t(){var a;return B.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.form.coName){t.next=3;break}return e.$message.warning("请输入企业名称"),t.abrupt("return");case 3:if(e.form.platPhone){t.next=6;break}return e.$message.warning("请输入平台电话"),t.abrupt("return");case 6:if(e.form.ver){t.next=9;break}return e.$message.warning("请输入APP版本号"),t.abrupt("return");case 9:if(e.form.downloadname){t.next=12;break}return e.$message.warning("请输下载文件名称"),t.abrupt("return");case 12:return a=!0,t.next=15,e.$refs.linkForm.forEach(function(e){e.validateFun().then(function(e){console.log("res=>",e),e||(a=e)})});case 15:if(a){t.next=17;break}return t.abrupt("return");case 17:if(e.form.attention){t.next=20;break}return e.$message.warning("请输入注意事项"),t.abrupt("return");case 20:if(e.form.abstract){t.next=23;break}return e.$message.warning("请输入企业简介"),t.abrupt("return");case 23:if(e.form.address){t.next=26;break}return e.$message.warning("请输入企业地址"),t.abrupt("return");case 26:if(e.form.lat&&e.form.lng){t.next=29;break}return e.$message.warning("请标注企业地址"),t.abrupt("return");case 29:0==e.form.id?e.http.post("/api/co",e.form).then(function(t){200==t.code?e.$message.success("保存成功！"):e.$message.error(t.msg)}):e.http.put("/api/co",e.form).then(function(t){200==t.code?e.$message.success("保存成功！"):e.$message.error(t.msg)});case 30:case"end":return t.stop()}},t,e)}))()}}},ae={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{style:"height:"+e.tableHeight+"px;background-color: #fff;padding: 24px;overflow-y:auto;"},[a("el-form",{ref:"form",attrs:{model:e.form,"label-width":"150px"}},[a("el-form-item",{attrs:{label:"企业名称"}},[a("el-input",{attrs:{size:"small",placeholder:"请输入企业名称"},model:{value:e.form.coName,callback:function(t){e.$set(e.form,"coName",t)},expression:"form.coName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"app版本号"}},[a("el-input",{attrs:{size:"small",placeholder:"请输入APP版本号",maxlength:"50"},model:{value:e.form.ver,callback:function(t){e.$set(e.form,"ver",t)},expression:"form.ver"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"下载文件名称"}},[a("el-input",{attrs:{size:"small",maxlength:"50",placeholder:"请输入下载文件名称"},model:{value:e.form.downloadname,callback:function(t){e.$set(e.form,"downloadname",t)},expression:"form.downloadname"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"平台电话"}},[a("el-input",{attrs:{size:"small",placeholder:"请输入平台电话"},model:{value:e.form.platPhone,callback:function(t){e.$set(e.form,"platPhone",t)},expression:"form.platPhone"}})],1),e._v(" "),e._l(e.form.links,function(t,r){return a("el-form-item",{key:r},[a("link-form",{ref:"linkForm",refInFor:!0,staticStyle:{"margin-left":"-150px"},attrs:{form:t,index:r},on:{linkChange:e.link_change_handle,delHandle:e.link_del_handle}})],1)}),e._v(" "),a("el-form-item",{attrs:{label:""}},[a("el-button",{attrs:{size:"small",icon:"el-icon-plus",type:"success"},on:{click:e.add_link_handle}},[e._v("添加联系人")])],1),e._v(" "),a("el-form-item",{attrs:{label:"注意事项"}},[a("vue-editor",{attrs:{edit:e.form.attention},on:{changeedit:function(t){return e.form.attention=t}}})],1),e._v(" "),a("el-form-item",{attrs:{label:"关于我们"}},[a("vue-editor2",{attrs:{edit:e.form.abstract},on:{changeedit:function(t){return e.form.abstract=t}}})],1),e._v(" "),a("el-form-item",{attrs:{label:"公司地址"}},[a("el-input",{attrs:{size:"small",placeholder:"请输入公司地址"},model:{value:e.form.address,callback:function(t){e.$set(e.form,"address",t)},expression:"form.address"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"标注公司地址"}},[a("div",{attrs:{id:"container"}})])],2),e._v(" "),a("el-form",{ref:"form2",staticStyle:{"margin-bottom":"40px"},attrs:{inline:!0,model:e.form,"label-width":"150px"}},[a("el-form-item",{staticStyle:{width:"50%"},attrs:{label:"封面图"}},[a("el-upload",{staticClass:"avatar-uploader",staticStyle:{float:"left"},attrs:{action:"/api/upload","show-file-list":!1,"on-success":function(t,a){return e.handleAvatarSuccess(t,a,"cover")},"before-upload":e.beforeAvatarUpload}},[e.form.cover?a("form-img",{attrs:{img:e.form.cover}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"二维码"}},[a("el-upload",{staticClass:"avatar-uploader",staticStyle:{float:"left"},attrs:{action:"/api/upload","show-file-list":!1,"on-success":function(t,a){return e.handleAvatarSuccess(t,a,"qrcode")},"before-upload":e.beforeAvatarUpload}},[e.form.qrcode?a("form-img",{attrs:{img:e.form.qrcode}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})],1)],1)],1),e._v(" "),a("div",{staticClass:"bottom"},[a("el-button",{attrs:{type:"success"},on:{click:e.btn_save}},[e._v("保存")])],1)],1)},staticRenderFns:[]};var re=a("C7Lr")(te,ae,!1,function(e){a("Fxcr")},"data-v-f738ebe6",null).exports,le={data:function(){return{searchForm:{nickname:"",username:"",status:"",phone:""},queryParams:{},table:{action:"/api/user/wxuser",heads:[{prop:"unionid",label:"unionid",type:"data",width:270},{prop:"nickname",label:"昵称",type:"data"},{prop:"username",label:"用户姓名",type:"data"},{prop:"phone",label:"手机号",type:"data"},{prop:"idCode",label:"身份证",type:"data",width:220},{prop:"status",label:"状态",type:"comps",tplName:"tpstatus"},{prop:"isblacklist",label:"黑名单",type:"comps",tplName:"tpblacklist"},{prop:"createAt",label:"创建时间",type:"time"},{prop:"operation",label:"操作",type:"comps",tplName:"toperation",width:150}]}}},methods:{query_handle:function(){var e=this;z()(this.searchForm).forEach(function(t){e.searchForm[t]?e.$set(e.queryParams,t,e.searchForm[t]):delete e.queryParams[t]}),this.$refs.table.reload()},set_handle:function(e,t){var a=this,r={unionid:e.unionid,type:t};this.http.post("/api/user/setwxuser",r).then(function(e){200==e.code?(a.$message.success("设置成功"),a.$refs.table.reload()):a.$message.error(e.msg)})}}},ie={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("base-query",{on:{queryhandle:e.query_handle}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:3}},[a("div",{staticClass:"search-title"},[e._v("昵称")])]),e._v(" "),a("el-col",{attrs:{span:9}},[a("el-input",{staticStyle:{width:"300px"},attrs:{size:"small",placeholder:"请输入昵称"},model:{value:e.searchForm.nickname,callback:function(t){e.$set(e.searchForm,"nickname",t)},expression:"searchForm.nickname"}})],1),e._v(" "),a("el-col",{attrs:{span:3}},[a("div",{staticClass:"search-title"},[e._v("用户名称")])]),e._v(" "),a("el-col",{attrs:{span:9}},[a("el-input",{staticStyle:{width:"300px"},attrs:{size:"small",placeholder:"请输入用户名称"},model:{value:e.searchForm.username,callback:function(t){e.$set(e.searchForm,"username",t)},expression:"searchForm.username"}})],1)],1),e._v(" "),a("el-row",{staticStyle:{"margin-top":"10px"},attrs:{gutter:20}},[a("el-col",{attrs:{span:3}},[a("div",{staticClass:"search-title"},[e._v("手机号")])]),e._v(" "),a("el-col",{attrs:{span:9}},[a("el-input",{staticStyle:{width:"300px"},attrs:{size:"small",placeholder:"请输入手机号"},model:{value:e.searchForm.phone,callback:function(t){e.$set(e.searchForm,"phone",t)},expression:"searchForm.phone"}})],1),e._v(" "),a("el-col",{attrs:{span:3}},[a("div",{staticClass:"search-title"},[e._v("状态")])]),e._v(" "),a("el-col",{attrs:{span:9}},[a("el-select",{staticStyle:{width:"300px"},attrs:{size:"small",clearable:"",placeholder:"请选择状态"},model:{value:e.searchForm.status,callback:function(t){e.$set(e.searchForm,"status",t)},expression:"searchForm.status"}},[a("el-option",{attrs:{label:"全部",value:""}}),e._v(" "),a("el-option",{attrs:{label:"已注册",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"未注册",value:"0"}})],1)],1)],1)],1),e._v(" "),a("base-table",{ref:"table",attrs:{tableName:"会员列表",action:e.table.action,columns:e.table.heads,queryParams:e.queryParams},scopedSlots:e._u([{key:"default",fn:function(t){return["tpstatus"==t.tplName?a("div",[e._v(e._s(1==t.row.status?"已注册":"未注册"))]):e._e(),e._v(" "),"tpblacklist"==t.tplName&&1==t.row.status?a("div",[e._v(e._s(0==t.row.isblacklist?"否":"是"))]):e._e(),e._v(" "),"toperation"==t.tplName?a("div",[1==t.row.isblacklist&&1==t.row.status?a("el-button",{attrs:{size:"small",type:"success"},on:{click:function(a){e.set_handle(t.row,0)}}},[e._v("设置白名单\n        ")]):e._e(),e._v(" "),0==t.row.isblacklist&&1==t.row.status?a("el-button",{attrs:{size:"small",type:"info"},on:{click:function(a){e.set_handle(t.row,1)}}},[e._v("设置黑名单\n        ")]):e._e()],1):e._e()]}}])})],1)},staticRenderFns:[]};var oe=a("C7Lr")(le,ie,!1,function(e){a("OnZy")},null,null).exports,se={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("div"),this._v(" "),t("router-view")],1)},staticRenderFns:[]};a("C7Lr")({},se,!1,function(e){a("7d/K")},null,null).exports;var ne=null,ce={props:{id:{type:Number,default:0},formDialog:{type:Boolean,default:!1}},data:function(){return{form:{id:0,name:"",abstract:"",cover:"",imgList:""}}},methods:{handle_Close:function(){this.$refs.form.resetFields(),this.$emit("dialogHandle",{dialog:!1,isreload:!1})},handleAvatarSuccess:function(e,t){200==e.code?this.form.picture=e.data[0]:this.$message.error(e.msg),ne.close()},beforeAvatarUpload:function(e){var t="image/jpeg,image/png".indexOf(e.type)>-1;return t?(ne=this.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"}),t):(this.$message.error("上传的图片只能是jpg,png格式！"),t)}}},de={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:"企业信息表单",visible:e.formDialog,top:"10vh",width:"700px","append-to-body":"","close-on-click-modal":!1,"before-close":e.handle_Close},on:{"update:visible":function(t){e.formDialog=t}}},[a("el-form",{ref:"form",attrs:{model:e.form,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"企业名称"}},[a("el-input",{staticStyle:{width:"350px"},attrs:{placeholder:"请输入企业名称"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"封面图"}},[a("el-upload",{staticClass:"avatar-uploader",staticStyle:{float:"left"},attrs:{action:"/api/upload","show-file-list":!1,"on-success":e.handleAvatarSuccess,"before-upload":e.beforeAvatarUpload}},[e.form.picture?a("form-img",{attrs:{img:e.form.picture}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})],1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.handle_Close}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary"}},[e._v("确认")])],1)],1)},staticRenderFns:[]};var me={components:{detailForm:a("C7Lr")(ce,de,!1,function(e){a("l6xR")},"data-v-963eb9a8",null).exports},data:function(){return{searchForm:{name:""},queryParams:{},table:{action:"/api/ent",heads:[{prop:"id",label:"id",type:"data"},{prop:"name",label:"企业名称",type:"data"},{prop:"cover",label:"封面",type:"data"},{prop:"createAt",label:"创建时间",type:"time"},{prop:"operation",label:"操作",type:"comps",tplName:"toperation",width:200}]},formDialog:!1,currid:0}},methods:{query_handle:function(){},add_handle:function(){this.currid=0,this.formDialog=!0},dialog_handle:function(e){this.formDialog=e.dialog,e.isreload&&this.$refs.table.reload()}}},ue={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("base-query",{on:{queryhandle:e.query_handle}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:3}},[a("div",{staticClass:"search-title"},[e._v("企业名称")])]),e._v(" "),a("el-col",{attrs:{span:9}},[a("el-input",{staticStyle:{width:"300px"},attrs:{size:"small",placeholder:"请输入企业名称"},model:{value:e.searchForm.name,callback:function(t){e.$set(e.searchForm,"name",t)},expression:"searchForm.name"}})],1)],1)],1),e._v(" "),a("base-table",{ref:"table",attrs:{tableName:"企业列表",action:e.table.action,columns:e.table.heads,queryParams:e.queryParams},scopedSlots:e._u([{key:"default",fn:function(t){return["toperation"==t.tplName?a("div",[a("el-button",{attrs:{size:"small",icon:"el-icon-edit",type:"primary"}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{size:"small",icon:"el-icon-delete",type:"danger"}},[e._v("删除")])],1):e._e()]}}])},[a("div",{attrs:{slot:"button"},slot:"button"},[a("el-button",{attrs:{size:"small",icon:"el-icon-plus",type:"success"},on:{click:e.add_handle}},[e._v("添加")])],1)]),e._v(" "),a("detail-form",{attrs:{formDialog:e.formDialog,id:e.currid},on:{dialogHandle:e.dialog_handle}})],1)},staticRenderFns:[]};a("C7Lr")(me,ue,!1,function(e){a("jbI1")},null,null).exports;var pe={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("div"),this._v(" "),t("router-view")],1)},staticRenderFns:[]};var he=a("C7Lr")({},pe,!1,function(e){a("lRCo")},null,null).exports,fe=null,ve={components:{VueEditor:Z},props:{id:{type:Number,default:0},formDialog:{type:Boolean,default:!1}},data:function(){return{form:{id:0,name:"",subname:"",isTop:0,salaryStart:"",salaryEnd:"",subsidys:[{value:""}],wages:"",contract:"",post:"",introduce:"",imgs:[],type:0,subsidyExplain:"",laborPrice:"",weight:1}}},methods:{handleAvatarSuccess:function(e,t,a){200==e.code?0==a?this.form.imgs.push(e.data):this.form.imgs[a]=e.data:this.$message.error(e.msg),fe.close()},beforeAvatarUpload:function(e){var t="image/jpeg,image/png".indexOf(e.type)>-1;return t?(fe=this.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"}),t):(this.$message.error("上传的图片只能是jpg,png格式！"),t)},img_del_handle:function(e){this.form.imgs.splice(e,1)},handleClose:function(){this.$refs.form.resetFields(),this.$emit("dialogHandle",{dialog:!1,isreload:!1})},add_subsidys:function(){this.form.subsidys.push({value:""})},subsidy_close:function(e){1!=this.form.subsidys.length&&this.form.subsidys.splice(e,1)},confirm_handle:function(){var e=this;if(this.form.name)if(this.form.subname)if(0!=this.form.imgs.length)if(this.form.salaryStart>this.form.salaryEnd)this.$message.warning("起始工资不能大于截止工资");else if(2!=this.form.type||this.form.subsidyExplain){var t=!0;this.form.subsidys.forEach(function(e){""==e.value&&(t=!1)}),t?""!=this.form.wages?""!=this.form.contract?""!=this.form.post?""!=this.form.introduce?0==this.id?this.http.post("/api/recruit",this.form).then(function(t){200==t.code?(e.$emit("dialogHandle",{dialog:!1,isreload:!0}),e.$message.success("添加成功!"),e.$refs.form.resetFields()):e.$message.error(t.msg)}):this.http.put("/api/recruit",this.form).then(function(t){200==t.code?(e.$emit("dialogHandle",{dialog:!1,isreload:!0}),e.$message.success("修改成功!"),e.$refs.form.resetFields()):e.$message.error(t.msg)}):this.$message.warning("请完善企业介绍内容"):this.$message.warning("请完善岗位介绍内容"):this.$message.warning("请完善合同信息内容"):this.$message.warning("请完善工资福利内容"):this.$message.warning("请完善补贴内容")}else this.$message.warning("请输入补贴说明");else this.$message.warning("请上传图片");else this.$message.warning("请输入副标题");else this.$message.warning("请输入标题")}},watch:{formDialog:function(){var e=this;this.formDialog&&(0==this.id?this.form={id:0,name:"",subname:"",salaryStart:"",salaryEnd:"",subsidys:[{value:""}],wages:"",post:"",introduce:"",imgs:[],type:0,subsidyExplain:"",laborPrice:""}:this.http.get("/api/recruit/"+this.id).then(function(t){200==t.code&&(e.form=t.data)}))}}},be={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:"招工表单",visible:e.formDialog,top:"20vh",width:"1000px","modal-append-to-body":!1,fullscreen:!0,"close-on-click-modal":!1,"before-close":e.handleClose},on:{"update:visible":function(t){e.formDialog=t}}},[a("el-card",[a("el-form",{ref:"form",attrs:{"label-width":"180px"}},[a("el-form-item",{attrs:{label:"标题"}},[a("el-input",{attrs:{size:"small",maxlength:"50"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"副标题"}},[a("el-input",{attrs:{size:"small",maxlength:"50"},model:{value:e.form.subname,callback:function(t){e.$set(e.form,"subname",t)},expression:"form.subname"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"图片"}},[e._l(e.form.imgs,function(t,r){return a("div",{key:r,staticClass:"avatar-uploader",attrs:{action:"/api/upload","show-file-list":!1,"on-success":function(t,a){return e.handleAvatarSuccess(t,a,r)},"before-upload":e.beforeAvatarUpload}},[a("div",{staticClass:"el-upload el-upload--text",staticStyle:{cursor:"default"}},[a("form-img",{attrs:{img:t}}),e._v(" "),a("i",{staticClass:"imgs-del el-icon el-icon-delete",on:{click:function(t){t.stopPropagation(),e.img_del_handle(r)}}})],1)])}),e._v(" "),a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"/api/upload","show-file-list":!1,"on-success":function(t,a){return e.handleAvatarSuccess(t,a,0)},"before-upload":e.beforeAvatarUpload}},[a("i",{staticClass:"el-icon-plus avatar-uploader-icon1"})]),e._v(" "),a("div",{staticStyle:{clear:"both",color:"#f00"}},[e._v("\n          标准尺寸：411*192\n        ")])],2),e._v(" "),a("el-form-item",{attrs:{label:"薪资范围"}},[a("el-col",{staticStyle:{"min-width":"190px"},attrs:{span:4}},[a("el-input-number",{attrs:{size:"small",min:1,max:1e5,label:"起始薪资"},model:{value:e.form.salaryStart,callback:function(t){e.$set(e.form,"salaryStart",t)},expression:"form.salaryStart"}})],1),e._v(" "),a("el-col",{staticStyle:{"text-align":"center"},attrs:{span:1}},[e._v("-")]),e._v(" "),a("el-col",{staticStyle:{"min-width":"190px"},attrs:{span:4}},[a("el-input-number",{attrs:{size:"small",min:1,max:1e5,label:"截止薪资"},model:{value:e.form.salaryEnd,callback:function(t){e.$set(e.form,"salaryEnd",t)},expression:"form.salaryEnd"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"是否置顶"}},[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949","active-text":"是","inactive-text":"否"},model:{value:e.form.isTop,callback:function(t){e.$set(e.form,"isTop",t)},expression:"form.isTop"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"排序"}},[a("el-input-number",{attrs:{size:"small",min:1,max:999999999,labbel:"请输入排序值1-999999999"},model:{value:e.form.weight,callback:function(t){e.$set(e.form,"weight",t)},expression:"form.weight"}}),a("span",{staticStyle:{"margin-left":"20px",color:"#f00"}},[e._v("[降序排序] 值越大排的越靠前")])],1),e._v(" "),a("el-form-item",{attrs:{label:"类型"}},[a("el-col",{staticStyle:{"min-width":"190px","padding-right":"10px"},attrs:{span:4}},[a("el-select",{attrs:{size:"small"},model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},[a("el-option",{attrs:{label:"无",value:0}}),e._v(" "),a("el-option",{attrs:{label:"工价",value:1}}),e._v(" "),a("el-option",{attrs:{label:"补贴",value:2}})],1)],1),e._v(" "),2==e.form.type?a("el-col",{staticStyle:{"min-width":"190px"},attrs:{span:6}},[a("el-input",{attrs:{size:"small",maxlength:"50",placeholder:"补贴说明"},model:{value:e.form.subsidyExplain,callback:function(t){e.$set(e.form,"subsidyExplain",t)},expression:"form.subsidyExplain"}})],1):e._e(),e._v(" "),1==e.form.type?a("el-col",{attrs:{span:5}},[a("el-input-number",{attrs:{size:"small",min:1,max:999},model:{value:e.form.laborPrice,callback:function(t){e.$set(e.form,"laborPrice",t)},expression:"form.laborPrice"}}),a("span",{staticStyle:{"margin-left":"8px"}},[e._v("元/小时")])],1):e._e()],1),e._v(" "),a("el-form-item",{attrs:{label:"补贴"}},[e._l(e.form.subsidys,function(t,r){return a("div",{key:r,staticClass:"subsidy-item"},[a("div",[a("vue-editor",{attrs:{edit:e.form.subsidys[r].value},on:{changeedit:function(t){return e.form.subsidys[r].value=t}}})],1),e._v(" "),a("div",{staticClass:"subsidy-close",on:{click:function(t){e.subsidy_close(r)}}},[a("i",{staticClass:"el-dialog__close el-icon el-icon-close"})])])}),e._v(" "),a("el-button",{attrs:{type:"success",size:"small"},on:{click:e.add_subsidys}},[e._v("添加补贴")])],2),e._v(" "),a("el-form-item",{attrs:{label:"工资福利"}},[a("vue-editor",{attrs:{edit:e.form.wages},on:{changeedit:function(t){return e.form.wages=t}}})],1),e._v(" "),a("el-form-item",{attrs:{label:"合同信息"}},[a("vue-editor",{attrs:{edit:e.form.contract},on:{changeedit:function(t){return e.form.contract=t}}})],1),e._v(" "),a("el-form-item",{attrs:{label:"岗位介绍"}},[a("vue-editor",{attrs:{edit:e.form.post},on:{changeedit:function(t){return e.form.post=t}}})],1),e._v(" "),a("el-form-item",{attrs:{label:"企业介绍"}},[a("vue-editor",{attrs:{edit:e.form.introduce},on:{changeedit:function(t){return e.form.introduce=t}}})],1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.handleClose}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.confirm_handle}},[e._v("确认")])],1)],1)},staticRenderFns:[]};var ge={components:{detailForm:a("C7Lr")(ve,be,!1,function(e){a("0Upf")},"data-v-4495d752",null).exports},data:function(){return{currid:0,formDialog:!1,queryParams:{name:"",active:"",isTop:"",status:""},searchForm:{name:"",active:"",isTop:"",status:""},table:{action:"/api/recruit",heads:[{prop:"id",label:"id",type:"data",width:50},{prop:"name",label:"标题",type:"data"},{prop:"subname",label:"副标题",type:"data"},{prop:"salaryStart",label:"薪资",type:"comps",tplName:"tpsalary"},{prop:"createAt",label:"创建时间",type:"time"},{prop:"isTop",label:"是否置顶",type:"comps",tplName:"tpisTop"},{prop:"type",label:"类型",type:"comps",tplName:"tptype"},{prop:"active",label:"活动状态",type:"comps",tplName:"tpactive"},{prop:"status",label:"状态",type:"comps",tplName:"tpstatus"},{prop:"weight",label:"排序",type:"data",width:50},{prop:"operation",label:"操作",type:"comps",tplName:"toperation",width:280}]}}},methods:{query_handle:function(){var e=this;z()(this.searchForm).forEach(function(t){e.searchForm[t]?e.$set(e.queryParams,t,e.searchForm[t]):delete e.queryParams[t]}),this.$refs.table.reload()},add_handle:function(){this.currid=0,this.formDialog=!0},editor_handle:function(e){this.currid=e.id,this.formDialog=!0},active_handle:function(e){var t=this,a=1==e.active?0:1,r=e.id;this.http.post("/api/recruit/active?id="+r+"&active="+a).then(function(r){200==r.code?(e.active=a,1==a?t.$messge.success("已启用招聘"):t.$message.success("已停止招聘")):t.$message.error(r.msg)})},status_handle:function(e){var t=this,a=1==e.status?0:1,r=e.id;this.http.post("/api/recruit/status?id="+r+"&status="+a).then(function(r){200==r.code?(e.status=a,1==a?t.$messge.success("已开启"):t.$message.success("已关闭")):t.$message.error(r.msg)})},dialog_handle:function(e){this.formDialog=e.dialog,e.isreload&&this.$refs.table.reload()}}},_e={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("base-query",{on:{queryhandle:e.query_handle}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:3}},[a("div",{staticClass:"search-title"},[e._v("名称")])]),e._v(" "),a("el-col",{attrs:{span:9}},[a("el-input",{staticStyle:{width:"220px"},attrs:{size:"small",placeholder:"请输入名称"},model:{value:e.searchForm.name,callback:function(t){e.$set(e.searchForm,"name",t)},expression:"searchForm.name"}})],1),e._v(" "),a("el-col",{attrs:{span:3}},[a("div",{staticClass:"search-title"},[e._v("活动状态")])]),e._v(" "),a("el-col",{attrs:{span:9}},[a("el-select",{staticStyle:{width:"220px"},attrs:{size:"small",clearable:"",placeholder:"请选择状态"},model:{value:e.searchForm.active,callback:function(t){e.$set(e.searchForm,"active",t)},expression:"searchForm.active"}},[a("el-option",{attrs:{label:"全部",value:""}}),e._v(" "),a("el-option",{attrs:{label:"启用招聘",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"停止招聘",value:"0"}})],1)],1)],1),e._v(" "),a("el-row",{staticStyle:{"margin-top":"10px"},attrs:{gutter:20}},[a("el-col",{attrs:{span:3}},[a("div",{staticClass:"search-title"},[e._v("置顶")])]),e._v(" "),a("el-col",{attrs:{span:9}},[a("el-select",{staticStyle:{width:"220px"},attrs:{size:"small",clearable:"",placeholder:"请选择是否置顶"},model:{value:e.searchForm.isTop,callback:function(t){e.$set(e.searchForm,"isTop",t)},expression:"searchForm.isTop"}},[a("el-option",{attrs:{label:"全部",value:""}}),e._v(" "),a("el-option",{attrs:{label:"是",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"否",value:"0"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:3}},[a("div",{staticClass:"search-title"},[e._v("状态")])]),e._v(" "),a("el-col",{attrs:{span:9}},[a("el-select",{staticStyle:{width:"220px"},attrs:{size:"small",clearable:"",placeholder:"请选择状态"},model:{value:e.searchForm.status,callback:function(t){e.$set(e.searchForm,"status",t)},expression:"searchForm.status"}},[a("el-option",{attrs:{label:"全部",value:""}}),e._v(" "),a("el-option",{attrs:{label:"开启",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"关闭",value:"0"}})],1)],1)],1)],1),e._v(" "),a("base-table",{ref:"table",attrs:{tableName:"招工列表",action:e.table.action,columns:e.table.heads,queryParams:e.queryParams},scopedSlots:e._u([{key:"default",fn:function(t){return["tpsalary"==t.tplName?a("div",[e._v("\n        "+e._s(t.row.salaryStart)+"-"+e._s(t.row.salaryEnd)+"\n      ")]):e._e(),e._v(" "),"tpactive"==t.tplName?a("div",[1==t.row.active?a("el-tag",{attrs:{type:"success"}},[e._v("启用招聘")]):a("el-tag",{attrs:{type:"danger"}},[e._v("停止招聘")])],1):e._e(),e._v(" "),"tpstatus"==t.tplName?a("div",[1==t.row.status?a("el-tag",{attrs:{type:"success"}},[e._v("开启")]):a("el-tag",{attrs:{type:"danger"}},[e._v("关闭")])],1):e._e(),e._v(" "),"tpisTop"==t.tplName?a("div",[1==t.row.isTop?a("el-tag",{attrs:{type:"success"}},[e._v("是")]):a("el-tag",{attrs:{type:"danger"}},[e._v("否")])],1):e._e(),e._v(" "),"tptype"==t.tplName?a("div",[e._v("\n        "+e._s(0==t.row.type?"无":1==t.row.type?"工价":"补贴")+"\n      ")]):e._e(),e._v(" "),"toperation"==t.tplName?a("div",[1==t.row.active?a("el-button",{attrs:{size:"small",type:"danger"},on:{click:function(a){e.active_handle(t.row)}}},[e._v("停止招聘")]):a("el-button",{attrs:{size:"small",type:"success"},on:{click:function(a){e.active_handle(t.row)}}},[e._v("启用招聘")]),e._v(" "),1==t.row.status?a("el-button",{attrs:{size:"small",type:"danger"},on:{click:function(a){e.status_handle(t.row)}}},[e._v("关闭")]):a("el-button",{attrs:{size:"small",type:"success"},on:{click:function(a){e.status_handle(t.row)}}},[e._v("开启")]),e._v(" "),1!=t.row.role?a("el-button",{attrs:{size:"small",icon:"el-icon-edit",type:"primary"},on:{click:function(a){e.editor_handle(t.row)}}},[e._v("编辑\n        ")]):e._e()],1):e._e()]}}])},[a("div",{attrs:{slot:"button"},slot:"button"},[a("el-button",{attrs:{size:"small",icon:"el-icon-plus",type:"success"},on:{click:e.add_handle}},[e._v("添加")])],1)]),e._v(" "),a("detail-form",{attrs:{formDialog:e.formDialog,id:e.currid},on:{dialogHandle:e.dialog_handle}})],1)},staticRenderFns:[]};var ye=a("C7Lr")(ge,_e,!1,function(e){a("/vhZ")},null,null).exports,xe={props:{id:{type:Number,default:0},formDialog:{type:Boolean,default:!1}},data:function(){return{form:{id:"",content:"",imgs:[]}}},methods:{handleClose:function(){this.$refs.form.resetFields(),this.$emit("dialogHandle",{dialog:!1,isreload:!1})}},watch:{formDialog:function(){var e=this;this.formDialog?this.http.get("/api/correction/"+this.id).then(function(t){200==t.code&&(e.form=t.data)}):this.form={id:"",content:"",imgs:[]}}}},we={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:"纠错详情",visible:e.formDialog,top:"20vh",width:"800px","modal-append-to-body":!1,"close-on-click-modal":!1,"before-close":e.handleClose},on:{"update:visible":function(t){e.formDialog=t}}},[a("el-card",[a("el-form",{ref:"form",attrs:{"label-width":"180px"}},[a("el-form-item",{attrs:{label:"纠错内容"}},[a("el-input",{attrs:{type:"textarea",rows:3,placeholder:"请输入内容",disabled:""},model:{value:e.form.content,callback:function(t){e.$set(e.form,"content",t)},expression:"form.content"}})],1),e._v(" "),e.form.imgs.length>0?a("el-form-item",{attrs:{label:"纠错图片"}},e._l(e.form.imgs,function(e,t){return a("div",{key:t,staticClass:"avatar-uploader"},[a("div",{staticClass:"el-upload el-upload--text"},[a("img",{staticClass:"avatar",attrs:{src:e,alt:""}})])])})):e._e()],1)],1)],1)},staticRenderFns:[]};var ke={components:{detailForm:a("C7Lr")(xe,we,!1,function(e){a("e4ky")},null,null).exports},data:function(){return{currid:0,formDialog:!1,searchForm:{recruitid:"",name:""},queryParams:{recruitid:"",name:""},table:{action:"/api/correction",heads:[{prop:"id",label:"id",type:"data",width:50},{prop:"recruitid",label:"招工ID",type:"data",width:100},{prop:"name",label:"招工标题",type:"data"},{prop:"content",label:"纠错内容",type:"data"},{prop:"imgs",label:"是否有图片",type:"comps",tplName:"tpimgs",width:100},{prop:"createAt",label:"创建时间",type:"time",width:150},{prop:"operation",label:"操作",type:"comps",tplName:"toperation",width:200}]}}},methods:{query_handle:function(){var e=this;z()(this.searchForm).forEach(function(t){e.searchForm[t]?e.$set(e.queryParams,t,e.searchForm[t]):delete e.queryParams[t]}),this.$refs.table.reload()},view_handle:function(e){this.currid=e.id,this.formDialog=!0},dialog_handle:function(e){this.formDialog=e.dialog}}},$e={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("base-query",{on:{queryhandle:e.query_handle}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:3}},[a("div",{staticClass:"search-title"},[e._v("招工ID")])]),e._v(" "),a("el-col",{attrs:{span:9}},[a("el-input",{staticStyle:{width:"220px"},attrs:{size:"small",placeholder:"请输入招工ID"},model:{value:e.searchForm.recruitid,callback:function(t){e.$set(e.searchForm,"recruitid",t)},expression:"searchForm.recruitid"}})],1),e._v(" "),a("el-col",{attrs:{span:3}},[a("div",{staticClass:"search-title"},[e._v("招工名称")])]),e._v(" "),a("el-col",{attrs:{span:9}},[a("el-input",{staticStyle:{width:"220px"},attrs:{size:"small",placeholder:"请输入招工名称"},model:{value:e.searchForm.name,callback:function(t){e.$set(e.searchForm,"name",t)},expression:"searchForm.name"}})],1)],1)],1),e._v(" "),a("base-table",{ref:"table",attrs:{tableName:"招工纠错列表",action:e.table.action,columns:e.table.heads,queryParams:e.queryParams},scopedSlots:e._u([{key:"default",fn:function(t){return["tpimgs"==t.tplName?a("div",[t.row.imgs?a("el-tag",{attrs:{type:"success"}},[e._v("有")]):a("el-tag",{attrs:{type:"danger"}},[e._v("无")])],1):e._e(),e._v(" "),"toperation"==t.tplName?a("div",[a("el-button",{attrs:{size:"small",type:"info",icon:"el-icon-view"},on:{click:function(a){e.view_handle(t.row)}}},[e._v("查看")])],1):e._e()]}}])}),e._v(" "),a("detail-form",{attrs:{formDialog:e.formDialog,id:e.currid},on:{dialogHandle:e.dialog_handle}})],1)},staticRenderFns:[]};var Ce=a("C7Lr")(ke,$e,!1,function(e){a("nOS3")},null,null).exports,Fe={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("div"),this._v(" "),t("router-view")],1)},staticRenderFns:[]};var Se=a("C7Lr")({},Fe,!1,function(e){a("yysO")},null,null).exports,qe={props:{id:{type:Number,default:0},formDialog:{type:Boolean,default:!1}},data:function(){return{isUpdate:!1,form:{otherdata:[]}}},methods:{handleClose:function(){this.$emit("dialogHandle",{dialog:!1,isreload:this.isUpdate})},invalid_handle:function(e){var t=this;this.$confirm("确定作废该报名信息吗, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.http.post("/api/crm/invalid/"+e.row.id).then(function(a){200==a.code?(t.isUpdate=!0,t.$message({message:"作废成功！",type:"success"}),t.form.otherdata.splice(e.$index,1)):t.$message.error(a.msg)})}).catch(function(){})},visit_handle:function(){var e=this,t={id:this.id,unionid:this.form.unionid,status:1,inviter:this.form.inviter,inviterPhone:this.form.inviterPhone,remarks:this.form.remarks};this.http.post("/api/crm/setvisit",t).then(function(t){200==t.code?(e.$message.success("成功设置为已回访!"),e.$emit("dialogHandle",{dialog:!1,isreload:!0})):e.$message.error(t.msg)})}},watch:{formDialog:function(){var e=this;this.formDialog&&this.http.get("/api/crm/wvisititem/"+this.id).then(function(t){e.form=t.data})}}},ze={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:"回访详情",visible:e.formDialog,top:"20vh",width:"900px","append-to-body":!0,"close-on-click-modal":!1,"before-close":e.handleClose},on:{"update:visible":function(t){e.formDialog=t}}},[a("el-card",[a("el-form",{ref:"form",attrs:{"label-width":"90px"}},[a("el-form-item",{attrs:{label:"招工名称"}},[a("el-input",{attrs:{disabled:"",size:"small",maxlength:"50",placeholder:"招工名称"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"用户名"}},[a("el-input",{attrs:{disabled:"",size:"small",maxlength:"50",placeholder:"用户名"},model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"用户电话"}},[a("el-input",{attrs:{disabled:"",size:"small",maxlength:"50",placeholder:"用户电话"},model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone",t)},expression:"form.phone"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"邀请人"}},[a("el-input",{attrs:{size:"small",maxlength:"50",placeholder:"邀请人"},model:{value:e.form.inviter,callback:function(t){e.$set(e.form,"inviter",t)},expression:"form.inviter"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"邀请人电话"}},[a("el-input",{attrs:{size:"small",maxlength:"50",placeholder:"邀请人电话"},model:{value:e.form.inviterPhone,callback:function(t){e.$set(e.form,"inviterPhone",t)},expression:"form.inviterPhone"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"邀请码"}},[a("el-input",{attrs:{disabled:"",size:"small",maxlength:"50",placeholder:"邀请码"},model:{value:e.form.inviterCode,callback:function(t){e.$set(e.form,"inviterCode",t)},expression:"form.inviterCode"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"是否黑名单"}},[a("el-switch",{attrs:{disabled:"","active-value":"1","inactive-value":"0","active-color":"#13ce66","inactive-color":"#ff4949","active-text":"是","inactive-text":"否"},model:{value:e.form.isblacklist,callback:function(t){e.$set(e.form,"isblacklist",t)},expression:"form.isblacklist"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"备注"}},[a("el-input",{attrs:{type:"textarea",maxlength:"100",rows:3,placeholder:"请输入备注"},model:{value:e.form.remarks,callback:function(t){e.$set(e.form,"remarks",t)},expression:"form.remarks"}})],1)],1)],1),e._v(" "),e.form.otherdata.length>0?a("el-card",{staticStyle:{"margin-top":"20px"}},[a("div",{attrs:{slot:"header"},slot:"header"},[a("span",[e._v("其他报名列表")])]),e._v(" "),a("div",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.form.otherdata}},[a("el-table-column",{attrs:{prop:"name",label:"招工名称",width:"360"}}),e._v(" "),a("el-table-column",{attrs:{prop:"inviter",label:"邀请人",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"inviterCode",label:"邀请编码"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"small",icon:"el-icon-delete",type:"danger"},on:{click:function(a){e.invalid_handle(t)}}},[e._v("作废")])]}}])})],1)],1)]):e._e(),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.handleClose}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.visit_handle}},[e._v("已回访")])],1)],1)},staticRenderFns:[]};var De={components:{detailForm:a("C7Lr")(qe,ze,!1,function(e){a("hC+2")},null,null).exports},data:function(){return{currid:0,formDialog:!1,searchForm:{name:"",phone:"",status:0},queryParams:{name:"",phone:"",status:0},table:{action:"/api/crm/wvisit",heads:[{prop:"id",label:"id",type:"data",width:60},{prop:"name",label:"招工名称",type:"data",width:250},{prop:"username",label:"用户名称",type:"data"},{prop:"phone",label:"用户电话",type:"data",width:150},{prop:"inviter",label:"邀请人",type:"data"},{prop:"inviterCode",label:"邀请人编码",type:"data"},{prop:"createAt",label:"创建时间",type:"time"},{prop:"operation",label:"操作",type:"comps",tplName:"toperation",width:280}]}}},methods:{query_handle:function(){var e=this;z()(this.searchForm).forEach(function(t){e.searchForm[t]?e.$set(e.queryParams,t,e.searchForm[t]):"status"!=t&&delete e.queryParams[t]}),console.log("searchForm=>",this.searchForm),this.$refs.table.reload()},view_handle:function(e){this.currid=e.id,this.formDialog=!0},editor_handle:function(e){var t=this,a={id:e.id,unionid:e.unionid,status:1,inviter:e.inviter,inviterPhone:e.inviterPhone,remarks:e.remarks};this.http.post("/api/crm/setvisit",a).then(function(e){200==e.code?(t.$message.success("成功设置为已回访!"),t.$refs.table.reload()):t.$message.error(e.msg)})},invalid_handle:function(e){var t=this;this.$confirm("确定作废该报名信息吗, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.http.post("/api/crm/invalid/"+e.id).then(function(e){200==e.code?(t.$message({message:"作废成功！",type:"success"}),t.$refs.table.reload()):t.$message.error(e.msg)})}).catch(function(){})},dialog_handle:function(e){this.formDialog=e.dialog,e.isreload&&this.$refs.table.reload()}}},Pe={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("base-query",{on:{queryhandle:e.query_handle}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:3}},[a("div",{staticClass:"search-title"},[e._v("招工名称")])]),e._v(" "),a("el-col",{attrs:{span:9}},[a("el-input",{staticStyle:{width:"300px"},attrs:{size:"small",placeholder:"请输入招工名称"},model:{value:e.searchForm.name,callback:function(t){e.$set(e.searchForm,"name",t)},expression:"searchForm.name"}})],1),e._v(" "),a("el-col",{attrs:{span:3}},[a("div",{staticClass:"search-title"},[e._v("手机号")])]),e._v(" "),a("el-col",{attrs:{span:9}},[a("el-input",{staticStyle:{width:"300px"},attrs:{size:"small",placeholder:"请输入手机号"},model:{value:e.searchForm.phone,callback:function(t){e.$set(e.searchForm,"phone",t)},expression:"searchForm.phone"}})],1)],1)],1),e._v(" "),a("base-table",{ref:"table",attrs:{tableName:"待回访列表",action:e.table.action,columns:e.table.heads,queryParams:e.queryParams},scopedSlots:e._u([{key:"default",fn:function(t){return["toperation"==t.tplName?a("div",[a("el-button",{attrs:{size:"small",type:"info",icon:"el-icon-view"},on:{click:function(a){e.view_handle(t.row)}}},[e._v("查看")]),e._v(" "),a("el-button",{attrs:{size:"small",icon:"el-icon-edit",type:"primary"},on:{click:function(a){e.editor_handle(t.row)}}},[e._v("已回访\n        ")]),e._v(" "),a("el-button",{attrs:{size:"small",icon:"el-icon-delete",type:"danger"},on:{click:function(a){e.invalid_handle(t.row)}}},[e._v("作废")])],1):e._e()]}}])}),e._v(" "),a("detail-form",{attrs:{formDialog:e.formDialog,id:e.currid},on:{dialogHandle:e.dialog_handle}})],1)},staticRenderFns:[]};var Ee=a("C7Lr")(De,Pe,!1,function(e){a("u92O")},null,null).exports,Ne={props:{id:{type:Number,default:0},formDialog:{type:Boolean,default:!1}},data:function(){return{isUpdate:!1,form:{otherdata:[]}}},methods:{handleClose:function(){this.$emit("dialogHandle",{dialog:!1,isreload:this.isUpdate})},induction_handle:function(){var e=this;if(this.form.entryAt){var t={id:this.id,unionid:this.form.unionid,status:2,inviter:this.form.inviter,inviterPhone:this.form.inviterPhone,remarks:this.form.remarks,entryAt:this.form.entryAt};this.http.post("/api/crm/setenroll",t).then(function(t){200==t.code?(e.$message.success("成功设置为已回访!"),e.$emit("dialogHandle",{dialog:!1,isreload:!0})):e.$message.error(t.msg)})}else this.$message.warning("请设置入职时间")}},watch:{formDialog:function(){var e=this;this.formDialog&&this.http.get("/api/crm/wvisititem/"+this.id).then(function(t){e.form=t.data})}}},Ae={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:"回访详情",visible:e.formDialog,top:"20vh",width:"900px","modal-append-to-body":!1,"close-on-click-modal":!1,"before-close":e.handleClose},on:{"update:visible":function(t){e.formDialog=t}}},[a("el-card",[a("el-form",{ref:"form",attrs:{"label-width":"90px"}},[a("el-form-item",{attrs:{label:"招工名称"}},[a("el-input",{attrs:{disabled:"",size:"small",maxlength:"50",placeholder:"招工名称"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"用户名"}},[a("el-input",{attrs:{disabled:"",size:"small",maxlength:"50",placeholder:"用户名"},model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"用户电话"}},[a("el-input",{attrs:{disabled:"",size:"small",maxlength:"50",placeholder:"用户电话"},model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone",t)},expression:"form.phone"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"邀请人"}},[a("el-input",{attrs:{size:"small",maxlength:"50",placeholder:"邀请人"},model:{value:e.form.inviter,callback:function(t){e.$set(e.form,"inviter",t)},expression:"form.inviter"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"邀请人电话"}},[a("el-input",{attrs:{size:"small",maxlength:"50",placeholder:"邀请人电话"},model:{value:e.form.inviterPhone,callback:function(t){e.$set(e.form,"inviterPhone",t)},expression:"form.inviterPhone"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"邀请码"}},[a("el-input",{attrs:{disabled:"",size:"small",maxlength:"50",placeholder:"邀请码"},model:{value:e.form.inviterCode,callback:function(t){e.$set(e.form,"inviterCode",t)},expression:"form.inviterCode"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"入职时间"}},[a("el-date-picker",{attrs:{type:"date",placeholder:"选择日期"},model:{value:e.form.entryAt,callback:function(t){e.$set(e.form,"entryAt",t)},expression:"form.entryAt"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"是否黑名单"}},[a("el-switch",{attrs:{disabled:"","active-value":"1","inactive-value":"0","active-color":"#13ce66","inactive-color":"#ff4949","active-text":"是","inactive-text":"否"},model:{value:e.form.isblacklist,callback:function(t){e.$set(e.form,"isblacklist",t)},expression:"form.isblacklist"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"备注"}},[a("el-input",{attrs:{type:"textarea",maxlength:"100",rows:3,placeholder:"请输入备注"},model:{value:e.form.remarks,callback:function(t){e.$set(e.form,"remarks",t)},expression:"form.remarks"}})],1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.handleClose}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.induction_handle}},[e._v("待入职")])],1)],1)},staticRenderFns:[]};var Le={components:{detailForm:a("C7Lr")(Ne,Ae,!1,function(e){a("IpoQ")},null,null).exports},data:function(){return{currid:0,formDialog:!1,searchForm:{name:"",phone:"",status:1},queryParams:{name:"",phone:"",status:1},table:{action:"/api/crm/enrolllist",heads:[{prop:"id",label:"id",type:"data",width:60},{prop:"name",label:"招工名称",type:"data",width:250},{prop:"username",label:"用户名称",type:"data"},{prop:"phone",label:"用户电话",type:"data",width:150},{prop:"inviter",label:"邀请人",type:"data"},{prop:"inviterCode",label:"邀请人编码",type:"data"},{prop:"createAt",label:"回访时间",type:"time"},{prop:"operation",label:"操作",type:"comps",tplName:"toperation",width:200}]}}},methods:{query_handle:function(){var e=this;z()(this.searchForm).forEach(function(t){e.searchForm[t]?e.$set(e.queryParams,t,e.searchForm[t]):delete e.queryParams[t]}),this.$refs.table.reload()},editor_handle:function(e){this.currid=e.id,this.formDialog=!0},invalid_handle:function(e){var t=this;this.$confirm("确定作废该报名信息吗, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.http.post("/api/crm/invalid/"+e.id).then(function(e){200==e.code?(t.$message({message:"作废成功！",type:"success"}),t.$refs.table.reload()):t.$message.error(e.msg)})}).catch(function(){})},dialog_handle:function(e){this.formDialog=e.dialog,e.isreload&&this.$refs.table.reload()}}},Re={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("base-query",{on:{queryhandle:e.query_handle}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:3}},[a("div",{staticClass:"search-title"},[e._v("招工名称")])]),e._v(" "),a("el-col",{attrs:{span:9}},[a("el-input",{staticStyle:{width:"300px"},attrs:{size:"small",placeholder:"请输入招工名称"},model:{value:e.searchForm.name,callback:function(t){e.$set(e.searchForm,"name",t)},expression:"searchForm.name"}})],1),e._v(" "),a("el-col",{attrs:{span:3}},[a("div",{staticClass:"search-title"},[e._v("手机号")])]),e._v(" "),a("el-col",{attrs:{span:9}},[a("el-input",{staticStyle:{width:"300px"},attrs:{size:"small",placeholder:"请输入手机号"},model:{value:e.searchForm.phone,callback:function(t){e.$set(e.searchForm,"phone",t)},expression:"searchForm.phone"}})],1)],1)],1),e._v(" "),a("base-table",{ref:"table",attrs:{tableName:"已回访列表",action:e.table.action,columns:e.table.heads,queryParams:e.queryParams},scopedSlots:e._u([{key:"default",fn:function(t){return["toperation"==t.tplName?a("div",[a("el-button",{attrs:{size:"small",icon:"el-icon-edit",type:"primary"},on:{click:function(a){e.editor_handle(t.row)}}},[e._v("编辑\n        ")]),e._v(" "),a("el-button",{attrs:{size:"small",icon:"el-icon-delete",type:"danger"},on:{click:function(a){e.invalid_handle(t.row)}}},[e._v("作废")])],1):e._e()]}}])}),e._v(" "),a("detail-form",{attrs:{formDialog:e.formDialog,id:e.currid},on:{dialogHandle:e.dialog_handle}})],1)},staticRenderFns:[]};var He=a("C7Lr")(Le,Re,!1,function(e){a("ZEgo")},null,null).exports,Te={props:{id:{type:Number,default:0},formDialog:{type:Boolean,default:!1}},data:function(){return{isUpdate:!1,form:{otherdata:[]}}},methods:{handleClose:function(){this.$emit("dialogHandle",{dialog:!1,isreload:this.isUpdate})},induction_handle:function(e){var t=this;if(this.form.entryAt){var a={id:this.id,unionid:this.form.unionid,status:e,inviter:this.form.inviter,inviterPhone:this.form.inviterPhone,remarks:this.form.remarks,entryAt:this.form.entryAt};this.http.post("/api/crm/setenroll",a).then(function(a){200==a.code?(3==e?t.$message.success("成功设置为待返现!"):t.$message.success("成功设置为已完结!"),t.$emit("dialogHandle",{dialog:!1,isreload:!0})):t.$message.error(a.msg)})}else this.$message.warning("请设置入职时间")}},watch:{formDialog:function(){var e=this;this.formDialog&&this.http.get("/api/crm/wvisititem/"+this.id).then(function(t){e.form=t.data})}}},Be={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:"待入职详情",visible:e.formDialog,top:"20vh",width:"900px","modal-append-to-body":!1,"close-on-click-modal":!1,"before-close":e.handleClose},on:{"update:visible":function(t){e.formDialog=t}}},[a("el-card",[a("el-form",{ref:"form",attrs:{"label-width":"90px"}},[a("el-form-item",{attrs:{label:"招工名称"}},[a("el-input",{attrs:{disabled:"",size:"small",maxlength:"50",placeholder:"招工名称"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"用户名"}},[a("el-input",{attrs:{disabled:"",size:"small",maxlength:"50",placeholder:"用户名"},model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"用户电话"}},[a("el-input",{attrs:{disabled:"",size:"small",maxlength:"50",placeholder:"用户电话"},model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone",t)},expression:"form.phone"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"邀请人"}},[a("el-input",{attrs:{size:"small",maxlength:"50",placeholder:"邀请人"},model:{value:e.form.inviter,callback:function(t){e.$set(e.form,"inviter",t)},expression:"form.inviter"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"邀请人电话"}},[a("el-input",{attrs:{size:"small",maxlength:"50",placeholder:"邀请人电话"},model:{value:e.form.inviterPhone,callback:function(t){e.$set(e.form,"inviterPhone",t)},expression:"form.inviterPhone"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"邀请码"}},[a("el-input",{attrs:{disabled:"",size:"small",maxlength:"50",placeholder:"邀请码"},model:{value:e.form.inviterCode,callback:function(t){e.$set(e.form,"inviterCode",t)},expression:"form.inviterCode"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"入职时间"}},[a("el-date-picker",{attrs:{type:"date",placeholder:"选择日期"},model:{value:e.form.entryAt,callback:function(t){e.$set(e.form,"entryAt",t)},expression:"form.entryAt"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"是否黑名单"}},[a("el-switch",{attrs:{disabled:"","active-value":"1","inactive-value":"0","active-color":"#13ce66","inactive-color":"#ff4949","active-text":"是","inactive-text":"否"},model:{value:e.form.isblacklist,callback:function(t){e.$set(e.form,"isblacklist",t)},expression:"form.isblacklist"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"备注"}},[a("el-input",{attrs:{type:"textarea",maxlength:"100",rows:3,placeholder:"请输入备注"},model:{value:e.form.remarks,callback:function(t){e.$set(e.form,"remarks",t)},expression:"form.remarks"}})],1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.handleClose}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.induction_handle(3)}}},[e._v("待返现")]),e._v(" "),a("el-button",{attrs:{type:"danger"},on:{click:function(t){e.induction_handle(4)}}},[e._v("已完结")])],1)],1)},staticRenderFns:[]};var Me={components:{detailForm:a("C7Lr")(Te,Be,!1,function(e){a("vtQK")},null,null).exports},data:function(){return{currid:0,formDialog:!1,searchForm:{name:"",phone:"",status:2},queryParams:{name:"",phone:"",status:2},table:{action:"/api/crm/enrolllist",heads:[{prop:"id",label:"id",type:"data",width:60},{prop:"name",label:"招工名称",type:"data",width:250},{prop:"username",label:"用户名称",type:"data"},{prop:"phone",label:"用户电话",type:"data",width:150},{prop:"inviter",label:"邀请人",type:"data"},{prop:"inviterCode",label:"邀请人编码",type:"data"},{prop:"entryAt",label:"入职时间",type:"time"},{prop:"operation",label:"操作",type:"comps",tplName:"toperation",width:280}]}}},methods:{query_handle:function(){var e=this;z()(this.searchForm).forEach(function(t){e.searchForm[t]?e.$set(e.queryParams,t,e.searchForm[t]):delete e.queryParams[t]}),this.$refs.table.reload()},view_handle:function(e){this.currid=e.id,this.formDialog=!0},editor_handle:function(e,t){var a=this,r="确定要设置该信息为待返现吗?";4==t&&(r="确定要设置该信息为已完结吗?"),this.$confirm(r,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var r={id:e.id,unionid:e.unionid,status:t,inviter:e.inviter,inviterPhone:e.inviterPhone,remarks:e.remarks,entryAt:e.entryAt};a.http.post("/api/crm/setenroll",r).then(function(e){200==e.code?(3==t?a.$message.success("成功设置为待返现!"):a.$message.success("成功设置为已完结!"),a.$refs.table.reload()):a.$message.error(e.msg)})}).catch(function(){})},dialog_handle:function(e){this.formDialog=e.dialog,e.isreload&&this.$refs.table.reload()}}},Ue={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("base-query",{on:{queryhandle:e.query_handle}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:3}},[a("div",{staticClass:"search-title"},[e._v("招工名称")])]),e._v(" "),a("el-col",{attrs:{span:9}},[a("el-input",{staticStyle:{width:"300px"},attrs:{size:"small",placeholder:"请输入招工名称"},model:{value:e.searchForm.name,callback:function(t){e.$set(e.searchForm,"name",t)},expression:"searchForm.name"}})],1),e._v(" "),a("el-col",{attrs:{span:3}},[a("div",{staticClass:"search-title"},[e._v("手机号")])]),e._v(" "),a("el-col",{attrs:{span:9}},[a("el-input",{staticStyle:{width:"300px"},attrs:{size:"small",placeholder:"请输入手机号"},model:{value:e.searchForm.phone,callback:function(t){e.$set(e.searchForm,"phone",t)},expression:"searchForm.phone"}})],1)],1)],1),e._v(" "),a("base-table",{ref:"table",attrs:{tableName:"待入职列表",action:e.table.action,columns:e.table.heads,queryParams:e.queryParams},scopedSlots:e._u([{key:"default",fn:function(t){return["toperation"==t.tplName?a("div",[a("el-button",{attrs:{size:"small",type:"info",icon:"el-icon-view"},on:{click:function(a){e.view_handle(t.row)}}},[e._v("查看")]),e._v(" "),a("el-button",{attrs:{size:"small",icon:"el-icon-edit",type:"primary"},on:{click:function(a){e.editor_handle(t.row,3)}}},[e._v("待返现\n                ")]),e._v(" "),a("el-button",{attrs:{size:"small",icon:"el-icon-success",type:"danger"},on:{click:function(a){e.editor_handle(t.row,4)}}},[e._v("完结")])],1):e._e()]}}])}),e._v(" "),a("detail-form",{attrs:{formDialog:e.formDialog,id:e.currid},on:{dialogHandle:e.dialog_handle}})],1)},staticRenderFns:[]};var Oe=a("C7Lr")(Me,Ue,!1,function(e){a("ltRB")},null,null).exports,je={props:{id:{type:Number,default:0},formDialog:{type:Boolean,default:!1}},data:function(){return{isUpdate:!1,form:{otherdata:[]}}},methods:{formatDate:g,handleClose:function(){this.$emit("dialogHandle",{dialog:!1,isreload:this.isUpdate})},delete_handle:function(e){var t=this;this.$confirm("确定要删除该返现记录吗, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.http.delete("/api/cashback/"+e.row.id,{params:{type:0}}).then(function(a){200==a.code?(t.$message.success("删除成功！"),t.form.otherdata.splice(e.$index,1)):t.$message.error(a.msg)})}).catch(function(){})}},watch:{formDialog:function(){var e=this;this.formDialog&&this.http.get("/api/crm/wcashbackitem/"+this.id).then(function(t){e.form=t.data})}}},Ie={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:"待返现详情",visible:e.formDialog,top:"20vh",width:"900px","append-to-body":!0,"close-on-click-modal":!1,"before-close":e.handleClose},on:{"update:visible":function(t){e.formDialog=t}}},[a("el-card",[a("el-form",{ref:"form",attrs:{"label-width":"90px"}},[a("el-form-item",{attrs:{label:"招工名称"}},[a("el-input",{attrs:{disabled:"",size:"small",maxlength:"50",placeholder:"招工名称"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"用户名"}},[a("el-input",{attrs:{disabled:"",size:"small",maxlength:"50",placeholder:"用户名"},model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"用户电话"}},[a("el-input",{attrs:{disabled:"",size:"small",maxlength:"50",placeholder:"用户电话"},model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone",t)},expression:"form.phone"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"邀请人"}},[a("el-input",{attrs:{disabled:"",size:"small",maxlength:"50",placeholder:"邀请人"},model:{value:e.form.inviter,callback:function(t){e.$set(e.form,"inviter",t)},expression:"form.inviter"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"邀请人电话"}},[a("el-input",{attrs:{disabled:"",size:"small",maxlength:"50",placeholder:"邀请人电话"},model:{value:e.form.inviterPhone,callback:function(t){e.$set(e.form,"inviterPhone",t)},expression:"form.inviterPhone"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"邀请码"}},[a("el-input",{attrs:{disabled:"",size:"small",maxlength:"50",placeholder:"邀请码"},model:{value:e.form.inviterCode,callback:function(t){e.$set(e.form,"inviterCode",t)},expression:"form.inviterCode"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"银行"}},[a("el-input",{attrs:{disabled:"",size:"small",maxlength:"50",placeholder:"银行"},model:{value:e.form.bank,callback:function(t){e.$set(e.form,"bank",t)},expression:"form.bank"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"银行卡号"}},[a("el-input",{attrs:{disabled:"",size:"small",maxlength:"50",placeholder:"银行卡号"},model:{value:e.form.cardNumber,callback:function(t){e.$set(e.form,"cardNumber",t)},expression:"form.cardNumber"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"是否黑名单"}},[a("el-switch",{attrs:{disabled:"","active-value":"1","inactive-value":"0","active-color":"#13ce66","inactive-color":"#ff4949","active-text":"是","inactive-text":"否"},model:{value:e.form.isblacklist,callback:function(t){e.$set(e.form,"isblacklist",t)},expression:"form.isblacklist"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"备注"}},[a("el-input",{attrs:{disabled:"",type:"textarea",rows:3,placeholder:"请输入备注"},model:{value:e.form.remarks,callback:function(t){e.$set(e.form,"remarks",t)},expression:"form.remarks"}})],1)],1)],1),e._v(" "),e.form.otherdata.length>0?a("el-card",{staticStyle:{"margin-top":"20px"}},[a("div",{attrs:{slot:"header"},slot:"header"},[a("span",[e._v("返现记录列表")])]),e._v(" "),a("div",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.form.otherdata}},[a("el-table-column",{attrs:{prop:"price",label:"金额",width:"150"}}),e._v(" "),a("el-table-column",{attrs:{prop:"createAt",label:"返现时间",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s(e.formatDate(t.row.createAt))+"\n          ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"remarks",label:"描述"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"small",icon:"el-icon-delete",type:"danger"},on:{click:function(a){e.delete_handle(t)}}},[e._v("删除")])]}}])})],1)],1)]):e._e(),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.handleClose}},[e._v("取消")])],1)],1)},staticRenderFns:[]};var Ve={components:{detailForm:a("C7Lr")(je,Ie,!1,function(e){a("wvq3")},null,null).exports},data:function(){return{currid:0,formDialog:!1,searchForm:{name:"",phone:"",status:3},queryParams:{name:"",phone:"",status:3},table:{action:"/api/crm/enrolllist",heads:[{prop:"id",label:"id",type:"data",width:60},{prop:"name",label:"招工名称",type:"data",width:250},{prop:"username",label:"用户名称",type:"data"},{prop:"phone",label:"用户电话",type:"data",width:150},{prop:"inviter",label:"邀请人",type:"data"},{prop:"inviterCode",label:"邀请人编码",type:"data"},{prop:"entryAt",label:"入职时间",type:"time",width:120},{prop:"lastcashback",label:"返现时间",type:"time",width:120},{prop:"operation",label:"操作",type:"comps",tplName:"toperation",width:300}]},cashbackDialog:!1,cashbackForm:{price:100,remarks:""},localrow:null}},methods:{query_handle:function(){var e=this;z()(this.searchForm).forEach(function(t){e.searchForm[t]?e.$set(e.queryParams,t,e.searchForm[t]):delete e.queryParams[t]}),this.$refs.table.reload()},view_handle:function(e){this.currid=e.id,this.formDialog=!0},add_handle:function(e){this.cashbackForm={price:100,remarks:""},this.cashbackDialog=!0,this.localrow=e},end_handle:function(e){var t=this;this.$confirm("确定要设置该信息为已完结吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var a={id:e.id,unionid:e.unionid,status:4,inviter:e.inviter,inviterPhone:e.inviterPhone,remarks:e.remarks,entryAt:e.entryAt};t.http.post("/api/crm/setenroll",a).then(function(e){200==e.code?(status,t.$message.success("成功设置为已完结!"),t.$refs.table.reload()):t.$message.error(e.msg)})}).catch(function(){})},dialog_handle:function(e){this.formDialog=e.dialog,e.isreload&&this.$refs.table.reload()},handleClose:function(){this.cashbackDialog=!1},save_handle:function(){var e=this,t={enrollid:this.localrow.id,unionid:this.localrow.unionid,price:this.cashbackForm.price,remarks:this.cashbackForm.remarks};this.http.post("/api/cashback",t).then(function(t){200==t.code?(e.$message.success("添加返现记录成功！"),e.cashbackDialog=!1):e.$message.error(t.msg)})}}},Ke={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("base-query",{on:{queryhandle:e.query_handle}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:3}},[a("div",{staticClass:"search-title"},[e._v("招工名称")])]),e._v(" "),a("el-col",{attrs:{span:9}},[a("el-input",{staticStyle:{width:"300px"},attrs:{size:"small",placeholder:"请输入招工名称"},model:{value:e.searchForm.name,callback:function(t){e.$set(e.searchForm,"name",t)},expression:"searchForm.name"}})],1),e._v(" "),a("el-col",{attrs:{span:3}},[a("div",{staticClass:"search-title"},[e._v("手机号")])]),e._v(" "),a("el-col",{attrs:{span:9}},[a("el-input",{staticStyle:{width:"300px"},attrs:{size:"small",placeholder:"请输入手机号"},model:{value:e.searchForm.phone,callback:function(t){e.$set(e.searchForm,"phone",t)},expression:"searchForm.phone"}})],1)],1)],1),e._v(" "),a("base-table",{ref:"table",attrs:{tableName:"待返现列表",action:e.table.action,columns:e.table.heads,queryParams:e.queryParams},scopedSlots:e._u([{key:"default",fn:function(t){return["toperation"==t.tplName?a("div",[a("el-button",{attrs:{size:"small",type:"info",icon:"el-icon-view"},on:{click:function(a){e.view_handle(t.row)}}},[e._v("查看")]),e._v(" "),a("el-button",{attrs:{size:"small",icon:"el-icon-plus",type:"primary"},on:{click:function(a){e.add_handle(t.row)}}},[e._v("添加返现\n        ")]),e._v(" "),a("el-button",{attrs:{size:"small",icon:"el-icon-success",type:"danger"},on:{click:function(a){e.end_handle(t.row)}}},[e._v("完结")])],1):e._e()]}}])}),e._v(" "),a("detail-form",{attrs:{formDialog:e.formDialog,id:e.currid},on:{dialogHandle:e.dialog_handle}}),e._v(" "),a("el-dialog",{attrs:{title:"添加返现记录",visible:e.cashbackDialog,top:"20vh",width:"500px","modal-append-to-body":!1,"close-on-click-modal":!1,"before-close":e.handleClose},on:{"update:visible":function(t){e.cashbackDialog=t}}},[a("el-card",[a("el-form",{ref:"form",attrs:{"label-width":"100px"}},[a("el-form-item",{attrs:{label:"金额"}},[a("el-input-number",{staticStyle:{width:"250px"},attrs:{min:1,max:99999999,label:"返现金额"},model:{value:e.cashbackForm.price,callback:function(t){e.$set(e.cashbackForm,"price",t)},expression:"cashbackForm.price"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"备注"}},[a("el-input",{staticStyle:{width:"250px"},attrs:{maxlength:"100",type:"textarea",rows:3,placeholder:"请输入备注"},model:{value:e.cashbackForm.remarks,callback:function(t){e.$set(e.cashbackForm,"remarks",t)},expression:"cashbackForm.remarks"}})],1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.handleClose}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.save_handle}},[e._v("确定")])],1)],1)],1)},staticRenderFns:[]};var Qe=a("C7Lr")(Ve,Ke,!1,function(e){a("RYV2")},null,null).exports,Xe={props:{id:{type:Number,default:0},formDialog:{type:Boolean,default:!1}},data:function(){return{isUpdate:!1,form:{otherdata:[]}}},methods:{formatDate:g,handleClose:function(){this.$emit("dialogHandle",{dialog:!1,isreload:this.isUpdate})}},watch:{formDialog:function(){var e=this;this.formDialog&&this.http.get("/api/crm/wcashbackitem/"+this.id).then(function(t){e.form=t.data})}}},Ze={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:"待返现详情",visible:e.formDialog,top:"20vh",width:"900px","append-to-body":!0,"close-on-click-modal":!1,"before-close":e.handleClose},on:{"update:visible":function(t){e.formDialog=t}}},[a("el-card",[a("el-form",{ref:"form",attrs:{"label-width":"90px"}},[a("el-form-item",{attrs:{label:"招工名称"}},[a("el-input",{attrs:{disabled:"",size:"small",maxlength:"50",placeholder:"招工名称"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"用户名"}},[a("el-input",{attrs:{disabled:"",size:"small",maxlength:"50",placeholder:"用户名"},model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"用户电话"}},[a("el-input",{attrs:{disabled:"",size:"small",maxlength:"50",placeholder:"用户电话"},model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone",t)},expression:"form.phone"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"邀请人"}},[a("el-input",{attrs:{disabled:"",size:"small",maxlength:"50",placeholder:"邀请人"},model:{value:e.form.inviter,callback:function(t){e.$set(e.form,"inviter",t)},expression:"form.inviter"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"邀请人电话"}},[a("el-input",{attrs:{disabled:"",size:"small",maxlength:"50",placeholder:"邀请人电话"},model:{value:e.form.inviterPhone,callback:function(t){e.$set(e.form,"inviterPhone",t)},expression:"form.inviterPhone"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"邀请码"}},[a("el-input",{attrs:{disabled:"",size:"small",maxlength:"50",placeholder:"邀请码"},model:{value:e.form.inviterCode,callback:function(t){e.$set(e.form,"inviterCode",t)},expression:"form.inviterCode"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"银行"}},[a("el-input",{attrs:{disabled:"",size:"small",maxlength:"50",placeholder:"银行"},model:{value:e.form.bank,callback:function(t){e.$set(e.form,"bank",t)},expression:"form.bank"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"银行卡号"}},[a("el-input",{attrs:{disabled:"",size:"small",maxlength:"50",placeholder:"银行卡号"},model:{value:e.form.cardNumber,callback:function(t){e.$set(e.form,"cardNumber",t)},expression:"form.cardNumber"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"是否黑名单"}},[a("el-switch",{attrs:{disabled:"","active-value":"1","inactive-value":"0","active-color":"#13ce66","inactive-color":"#ff4949","active-text":"是","inactive-text":"否"},model:{value:e.form.isblacklist,callback:function(t){e.$set(e.form,"isblacklist",t)},expression:"form.isblacklist"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"备注"}},[a("el-input",{attrs:{disabled:"",type:"textarea",rows:3,placeholder:"请输入备注"},model:{value:e.form.remarks,callback:function(t){e.$set(e.form,"remarks",t)},expression:"form.remarks"}})],1)],1)],1),e._v(" "),e.form.otherdata.length>0?a("el-card",{staticStyle:{"margin-top":"20px"}},[a("div",{attrs:{slot:"header"},slot:"header"},[a("span",[e._v("返现记录列表")])]),e._v(" "),a("div",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.form.otherdata}},[a("el-table-column",{attrs:{prop:"price",label:"金额",width:"150"}}),e._v(" "),a("el-table-column",{attrs:{prop:"createAt",label:"返现时间",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s(e.formatDate(t.row.createAt))+"\n          ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"remarks",label:"描述"}})],1)],1)]):e._e(),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.handleClose}},[e._v("取消")])],1)],1)},staticRenderFns:[]};var Ge={components:{detailForm:a("C7Lr")(Xe,Ze,!1,function(e){a("XQ/K")},null,null).exports},data:function(){return{currid:0,formDialog:!1,searchForm:{name:"",phone:"",status:4},queryParams:{name:"",phone:"",status:4},table:{action:"/api/crm/enrolllist",heads:[{prop:"id",label:"id",type:"data",width:60},{prop:"name",label:"招工名称",type:"data",width:250},{prop:"username",label:"用户名称",type:"data"},{prop:"phone",label:"用户电话",type:"data",width:150},{prop:"inviter",label:"邀请人",type:"data"},{prop:"inviterCode",label:"邀请人编码",type:"data"},{prop:"updateAt",label:"完结时间",type:"time"},{prop:"operation",label:"操作",type:"comps",tplName:"toperation",width:120}]}}},methods:{query_handle:function(){var e=this;z()(this.searchForm).forEach(function(t){e.searchForm[t]?e.$set(e.queryParams,t,e.searchForm[t]):delete e.queryParams[t]}),this.$refs.table.reload()},view_handle:function(e){this.currid=e.id,this.formDialog=!0},dialog_handle:function(e){this.formDialog=e.dialog,e.isreload&&this.$refs.table.reload()}}},We={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("base-query",{on:{queryhandle:e.query_handle}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:3}},[a("div",{staticClass:"search-title"},[e._v("招工名称")])]),e._v(" "),a("el-col",{attrs:{span:9}},[a("el-input",{staticStyle:{width:"300px"},attrs:{size:"small",placeholder:"请输入招工名称"},model:{value:e.searchForm.name,callback:function(t){e.$set(e.searchForm,"name",t)},expression:"searchForm.name"}})],1),e._v(" "),a("el-col",{attrs:{span:3}},[a("div",{staticClass:"search-title"},[e._v("手机号")])]),e._v(" "),a("el-col",{attrs:{span:9}},[a("el-input",{staticStyle:{width:"300px"},attrs:{size:"small",placeholder:"请输入手机号"},model:{value:e.searchForm.phone,callback:function(t){e.$set(e.searchForm,"phone",t)},expression:"searchForm.phone"}})],1)],1)],1),e._v(" "),a("base-table",{ref:"table",attrs:{tableName:"已完结列表",action:e.table.action,columns:e.table.heads,queryParams:e.queryParams},scopedSlots:e._u([{key:"default",fn:function(t){return["toperation"==t.tplName?a("div",[a("el-button",{attrs:{size:"small",type:"info",icon:"el-icon-view"},on:{click:function(a){e.view_handle(t.row)}}},[e._v("查看")])],1):e._e()]}}])}),e._v(" "),a("detail-form",{attrs:{formDialog:e.formDialog,id:e.currid},on:{dialogHandle:e.dialog_handle}})],1)},staticRenderFns:[]};var Je=a("C7Lr")(Ge,We,!1,function(e){a("9czR")},null,null).exports,Ye={data:function(){return{cashbackDialog:!1,loading:!1,cashbacklist:[],form:{price:100,remarks:""},searchForm:{name:"",phone:""},queryParams:{enrollid:"",name:"",phone:""},table:{action:"/api/cashback",heads:[{prop:"id",label:"id",type:"data",width:60},{prop:"name",label:"招工名称",type:"data"},{prop:"username",label:"用户名称",type:"data",width:150},{prop:"phone",label:"用户电话",type:"data",width:150},{prop:"createAt",label:"创建时间",type:"time",width:120},{prop:"remarks",label:"类型",type:"comps",tplName:"tptype"},{prop:"price",label:"金额",type:"data"},{prop:"remarks",label:"备注",type:"data"},{prop:"operation",label:"操作",type:"comps",tplName:"toperation",width:120}]}}},methods:{query_handle:function(){var e=this;z()(this.searchForm).forEach(function(t){e.searchForm[t]?e.$set(e.queryParams,t,e.searchForm[t]):delete e.queryParams[t]}),this.$refs.table.reload()},add_handle:function(){this.form={price:100,remarks:""},this.cashbackDialog=!0},handleClose:function(){this.cashbackDialog=!1},remoteMethod:function(e){var t=this;this.http.get("/api/crm/enrolllist",{params:{phone:e,status:3}}).then(function(e){t.cashbacklist=e.data,console.log("res=>phone=>",e)})},editor_handle:function(e){var t=this,a=0,r="确定要删除该返现记录吗, 是否继续?";""==e.name&&(a=1,r="确定要作废该推荐记录吗, 是否继续?"),this.$confirm(r,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.http.delete("/api/cashback/"+e.id,{params:{type:a}}).then(function(e){200==e.code?(0==a?t.$message.success("删除成功！"):t.$message.success("作废成功！"),t.$refs.table.reload()):t.$message.error(e.msg)})}).catch(function(){})},save_handle:function(){var e=this;if(this.form.enrollid){var t=this.form.enrollid.split("|"),a={enrollid:t[0],unionid:t[1],price:this.form.price,remarks:this.form.remarks};this.http.post("/api/cashback",a).then(function(t){200==t.code?(e.$message.success("添加返现记录成功！"),e.cashbackDialog=!1,e.$refs.table.reload()):e.$message.error(t.msg)})}else this.$message.warning("请选择待返现记录")}}},et={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("base-query",{on:{queryhandle:e.query_handle}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:3}},[a("div",{staticClass:"search-title"},[e._v("招工名称")])]),e._v(" "),a("el-col",{attrs:{span:9}},[a("el-input",{staticStyle:{width:"300px"},attrs:{size:"small",placeholder:"请输入招工名称"},model:{value:e.searchForm.name,callback:function(t){e.$set(e.searchForm,"name",t)},expression:"searchForm.name"}})],1),e._v(" "),a("el-col",{attrs:{span:3}},[a("div",{staticClass:"search-title"},[e._v("手机号")])]),e._v(" "),a("el-col",{attrs:{span:9}},[a("el-input",{staticStyle:{width:"300px"},attrs:{size:"small",placeholder:"请输入手机号"},model:{value:e.searchForm.phone,callback:function(t){e.$set(e.searchForm,"phone",t)},expression:"searchForm.phone"}})],1)],1)],1),e._v(" "),a("base-table",{ref:"table",attrs:{tableName:"返现记录列表",action:e.table.action,columns:e.table.heads,queryParams:e.queryParams},scopedSlots:e._u([{key:"default",fn:function(t){return["toperation"==t.tplName?a("div",[""!=t.row.name?a("el-button",{attrs:{size:"small",icon:"el-icon-delete",type:"danger"},on:{click:function(a){e.editor_handle(t.row)}}},[e._v("删除\n        ")]):a("el-button",{attrs:{size:"small",icon:"el-icon-delete",type:"danger"},on:{click:function(a){e.editor_handle(t.row)}}},[e._v("作废\n        ")])],1):e._e(),e._v(" "),"tptype"==t.tplName?a("div",[e._v("\n        "+e._s(""==t.row.name?"推荐记录":"返现记录")+"\n      ")]):e._e()]}}])},[a("div",{attrs:{slot:"button"},slot:"button"},[a("el-button",{attrs:{size:"small",icon:"el-icon-plus",type:"success"},on:{click:e.add_handle}},[e._v("添加")])],1)]),e._v(" "),a("el-dialog",{attrs:{title:"添加返现记录",visible:e.cashbackDialog,top:"20vh",width:"500px","append-to-body":!0,"close-on-click-modal":!1,"before-close":e.handleClose},on:{"update:visible":function(t){e.cashbackDialog=t}}},[a("el-card",[a("el-form",{ref:"form",attrs:{"label-width":"100px"}},[a("el-form-item",{attrs:{label:"待返现记录"}},[a("el-select",{attrs:{filterable:"",remote:"","reserve-keyword":"",placeholder:"请输入会员手机号","remote-method":e.remoteMethod,loading:e.loading},model:{value:e.form.enrollid,callback:function(t){e.$set(e.form,"enrollid",t)},expression:"form.enrollid"}},e._l(e.cashbacklist,function(t){return a("el-option",{key:t.id,attrs:{label:t.username,value:t.id+"|"+t.unionid}},[a("span",{staticStyle:{float:"left"}},[e._v(e._s(t.id))]),e._v(" "),a("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px"}},[e._v(e._s(t.username))])])}))],1),e._v(" "),a("el-form-item",{attrs:{label:"金额"}},[a("el-input-number",{staticStyle:{width:"250px"},attrs:{min:1,max:99999999,label:"返现金额"},model:{value:e.form.price,callback:function(t){e.$set(e.form,"price",t)},expression:"form.price"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"备注"}},[a("el-input",{staticStyle:{width:"250px"},attrs:{maxlength:"100",type:"textarea",rows:3,placeholder:"请输入备注"},model:{value:e.form.remarks,callback:function(t){e.$set(e.form,"remarks",t)},expression:"form.remarks"}})],1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.handleClose}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.save_handle}},[e._v("确定")])],1)],1)],1)},staticRenderFns:[]};var tt=a("C7Lr")(Ye,et,!1,function(e){a("FlBu")},null,null).exports,at={data:function(){return{searchForm:{status:"",phone1:""},queryParams:{status:"",phone1:""},form:{price:100},dialog:!1,localrow:null,table:{action:"/api/crm/recommend",heads:[{prop:"id",label:"id",type:"data",width:60},{prop:"username1",label:"用户名称",type:"data"},{prop:"phone1",label:"用户电话",type:"data"},{prop:"username",label:"推荐人",type:"data"},{prop:"phone",label:"推荐人手机号",type:"data"},{prop:"price",label:"金额",type:"data"},{prop:"createAt",label:"创建时间",type:"time"},{prop:"updateAt",label:"返现时间",type:"time"},{prop:"status",label:"状态",type:"comps",tplName:"tpstatus"},{prop:"operation",label:"操作",type:"comps",tplName:"toperation",width:120}]}}},methods:{query_handle:function(){var e=this;z()(this.searchForm).forEach(function(t){e.searchForm[t]?e.$set(e.queryParams,t,e.searchForm[t]):delete e.queryParams[t]}),this.$refs.table.reload()},handleClose:function(){this.dialog=!1},setback_handle:function(e){this.dialog=!0,this.localrow=e,this.form={price:100}},save_handle:function(){var e=this,t={status:1,id:this.localrow.id,price:this.form.price};this.http.post("/api/crm/setrecommend",t).then(function(t){200==t.code?(e.$message.success("设置成功！"),e.dialog=!1,e.$refs.table.reload()):e.$message.error(t.msg)})}}},rt={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("base-query",{on:{queryhandle:e.query_handle}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:3}},[a("div",{staticClass:"search-title"},[e._v("状态")])]),e._v(" "),a("el-col",{attrs:{span:9}},[a("el-select",{attrs:{size:"small",clearable:"",placeholder:"请选择状态"},model:{value:e.searchForm.status,callback:function(t){e.$set(e.searchForm,"status",t)},expression:"searchForm.status"}},[a("el-option",{attrs:{label:"全部",value:""}}),e._v(" "),a("el-option",{attrs:{label:"未返现",value:"0"}}),e._v(" "),a("el-option",{attrs:{label:"已返现",value:"1"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:3}},[a("div",{staticClass:"search-title"},[e._v("手机号")])]),e._v(" "),a("el-col",{attrs:{span:9}},[a("el-input",{staticStyle:{width:"300px"},attrs:{size:"small",placeholder:"请输入手机号"},model:{value:e.searchForm.phone1,callback:function(t){e.$set(e.searchForm,"phone1",t)},expression:"searchForm.phone1"}})],1)],1)],1),e._v(" "),a("base-table",{ref:"table",attrs:{tableName:"推荐列表",action:e.table.action,columns:e.table.heads,queryParams:e.queryParams},scopedSlots:e._u([{key:"default",fn:function(t){return["tpstatus"==t.tplName?a("div",[e._v("\n        "+e._s(0==t.row.status?"未返现":"已返现")+"\n      ")]):e._e(),e._v(" "),"toperation"==t.tplName?a("div",[0==t.row.status?a("el-button",{attrs:{size:"small",type:"success",icon:"el-icon-check"},on:{click:function(a){e.setback_handle(t.row)}}},[e._v("确认返现")]):e._e()],1):e._e()]}}])}),e._v(" "),a("el-dialog",{attrs:{title:"设置返现金额",visible:e.dialog,top:"20vh",width:"500px","append-to-body":!0,"close-on-click-modal":!1,"before-close":e.handleClose},on:{"update:visible":function(t){e.dialog=t}}},[a("el-card",[a("el-form",{ref:"form",attrs:{"label-width":"100px"}},[a("el-form-item",{attrs:{label:"金额"}},[a("el-input-number",{staticStyle:{width:"250px"},attrs:{min:1,max:99999999,label:"金额"},model:{value:e.form.price,callback:function(t){e.$set(e.form,"price",t)},expression:"form.price"}})],1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.handleClose}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.save_handle}},[e._v("确定")])],1)],1)],1)},staticRenderFns:[]};var lt=a("C7Lr")(at,rt,!1,function(e){a("+fmM")},null,null).exports;a("mZiP");r.default.use(o.a);var it=new o.a({routes:[{path:"/",name:"admin",component:w,redirect:"/home",children:[{path:"home",name:"home",component:C},{path:"sys",name:"sys",component:S,redirect:"/sys/user",children:[{path:"/sys/user",component:H},{path:"/sys/base",component:re},{path:"/sys/wxuser",component:oe}]},{path:"recruit",name:"recruit",component:he,redirect:"/recruit/list",children:[{path:"/recruit/list",component:ye},{path:"/recruit/correction",component:Ce}]},{name:"crm",path:"crm",component:Se,redirect:"/crm/wvisit",children:[{path:"/crm/wvisit",component:Ee},{path:"/crm/avisit",component:He},{path:"/crm/wentry",component:Oe},{path:"/crm/cashback",component:Qe},{path:"/crm/end",component:Je},{path:"/crm/cashbacklist",component:tt},{path:"/crm/recommend",component:lt}]}]},{path:"/login",name:"Login",component:m}]}),ot=a("H93t"),st=a.n(ot),nt=(a("TsY+"),a("P8yQ")),ct=a.n(nt),dt={render:function(){var e=this.$createElement,t=this._self._c||e;return t("el-card",{staticClass:"box-card search-form",staticStyle:{"`min-width":"700px","margin-bottom":"20px"}},[t("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[t("div",{staticStyle:{float:"left",height:"32px","line-height":"32px"}},[this._v("查询\n        ")]),this._v(" "),t("div",{staticStyle:{float:"right"}},[t("el-button",{staticClass:"btn-box-shadow",attrs:{type:"primary",size:"small",icon:"el-icon-search"},on:{click:this.query_handle}},[this._v("查询\n            ")])],1)]),this._v(" "),t("div",[this._t("default")],2)])},staticRenderFns:[]};var mt=a("C7Lr")({data:function(){return{}},methods:{query_handle:function(){this.$emit("queryhandle")}}},dt,!1,function(e){a("D9kA")},null,null).exports,ut={props:{isExpand:{type:Boolean,default:!1},isAdd:{type:Boolean,default:!1},addList:{type:Array,default:function(){return[]}},selection:{type:Boolean,default:!1},paging:{type:Boolean,default:!0},action:{type:String,default:""},tableName:{type:String,default:""},queryParams:{type:Object,default:function(){return{}}},topHeight:{type:Number,default:400},minwidth:{type:Number,default:700},paginationlayout:{type:String,default:"total, sizes, prev, pager, next, jumper"},columns:{type:Array,default:function(){return[]}}},mounted:function(){console.log("isExpand=>",this.isExpand),this.tableHeight=document.documentElement.clientHeight-this.topHeight-80,this.action&&this.reload()},data:function(){return{tableHeight:500,currPage:1,pageSize:10,total:20,tableData:[],multipleSelection:[]}},methods:{formatDate:g,load_handle:function(){var e=this;this.multipleSelection=[];var t=this.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});this.queryParams.page=this.currPage,this.queryParams.size=this.pageSize;var a=this;this.http.get(this.action,{params:this.queryParams}).then(function(r){200==r.code?(e.paging?(e.total=r.count,e.tableData=r.data||[],r.count>0&&setTimeout(function(){e.$emit("loadrowhandle",e.tableData)},1)):e.tableData=r.data||[],a.isAdd&&a.tableData.forEach(function(e){a.addList.filter(function(t){return t.id==e.id}).length>0?e.isAdd=!1:e.isAdd=!0})):e.$message.error(r.msg),setTimeout(function(){t.close()},1e3)})},reload:function(){this.currPage=1,this.load_handle(this.queryParams)},handleSizeChange:function(e){this.pageSize=e,this.load_handle(this.queryParams)},handleCurrentChange:function(e){this.currPage=e,this.load_handle(this.queryParams)},add_handle:function(e){this.tableData[e.$index].isAdd=!1,this.addList.push(e.row),console.log("scope=>",e),this.$emit("addHandle",this.addList)},handleSelectionChange:function(e){var t=this;console.log("val=>",e),e.length>0&&e.forEach(function(e){0==t.multipleSelection.filter(function(t){return t.id==e.id}).length&&t.multipleSelection.push(e)});var a=[];this.tableData.forEach(function(t){0==e.filter(function(e){return e.id==t.id}).length&&a.push(t)}),a.forEach(function(e){var a=!1,r=0;t.multipleSelection.forEach(function(t,l){e.id==t.id&&(a=!0,r=l)}),a&&t.multipleSelection.splice(r,1)}),console.log("multipleSelection=>",this.multipleSelection)}}},pt={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-card",{staticClass:"box-card table-form",style:"min-width:"+e.minwidth+"px;"},[a("div",{attrs:{slot:"header"},slot:"header"},[a("span",[e._v(e._s(e.tableName))]),e._v(" "),a("div",{staticStyle:{float:"right","margin-top":"-5px"}},[e._t("button")],2)]),e._v(" "),a("el-table",{ref:"table",style:"width: 100%;margin-top:-8px; height:"+e.tableHeight+"px;",attrs:{data:e.tableData},on:{"selection-change":e.handleSelectionChange}},[e.isExpand?a("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._t("expand",null,{row:t.row})]}}])}):e._e(),e._v(" "),e.selection?a("el-table-column",{attrs:{type:"selection",width:"55"}}):e._e(),e._v(" "),e.isAdd?a("el-table-column",{scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.isAdd?a("el-button",{attrs:{size:"small",icon:"el-icon-plus",type:"success"},on:{click:function(a){e.add_handle(t)}}},[e._v("添加")]):e._e()]}}])}):e._e(),e._v(" "),e._l(e.columns,function(t,r){return a("el-table-column",{key:r,attrs:{prop:t.prop,label:t.label,width:t.width},scopedSlots:e._u([{key:"default",fn:function(r){return["data"==t.type?a("div",[e._v("\n            "+e._s(r.row[t.prop])+"\n          ")]):e._e(),e._v(" "),"comps"==t.type?a("div",[e._t("default",null,{row:r.row,tplName:t.tplName,index:r.$index,val:r.row[t.prop]})],2):e._e(),e._v(" "),"time"==t.type?a("div",[e._v("\n            "+e._s(e.formatDate(r.row[t.prop]))+"\n          ")]):e._e()]}}])})})],2),e._v(" "),e.paging?a("el-pagination",{staticStyle:{"margin-top":"20px","text-align":"center"},attrs:{"page-sizes":[10,20,30,40,50],"current-page":e.currPage,"page-size":e.pageSize,layout:e.paginationlayout,total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}):e._e()],1)],1)},staticRenderFns:[]};var ht=a("C7Lr")(ut,pt,!1,function(e){a("MDjY")},null,null).exports,ft=a("aozt"),vt=a.n(ft).a.create();vt.interceptors.request.use(function(e){return e},function(e){return b.a.reject(e)}),vt.interceptors.response.use(function(e){var t=e.data;return 200==t.code?t:(1003==t.code?(ot.Message.error(t.msg),setTimeout(function(){location.href="#/login"},2500)):ot.Message.error(t.msg),t)},function(e){return{code:404,msg:"服务端挂了"}}),vt.defaults.withCredentials=!0,vt.defaults.timeout=115e3;var bt=vt,gt={props:{img:{type:String,default:""}}},_t={render:function(){var e=this.$createElement;return(this._self._c||e)("img",{staticClass:"avatar",attrs:{src:""+(this.img?this.baseUrl+this.img:""),alt:""}})},staticRenderFns:[]};var yt=a("C7Lr")(gt,_t,!1,function(e){a("rqNS")},null,null).exports;r.default.prototype.$echarts=ct.a,r.default.use(st.a),r.default.config.productionTip=!1,r.default.component("base-admin",w),r.default.component("base-query",mt),r.default.component("base-table",ht),r.default.prototype.http=bt,r.default.component("form-img",yt),r.default.prototype.baseUrl="",new r.default({el:"#app",router:it,components:{App:i},template:"<App/>"})},OnZy:function(e,t){},RYV2:function(e,t){},TUy2:function(e,t){},"TsY+":function(e,t){},"XQ/K":function(e,t){},XVWo:function(e,t){},ZEgo:function(e,t){},aAbh:function(e,t){e.exports=[{id:1,name:"主页",icon:"icon-shouye-xianxing",path:"/",subList:[]},{id:2,name:"系统",icon:"icon-shezhi-xianxing",path:"/sys",subList:[{id:3,name:"用户管理",path:"/sys/user"},{id:4,name:"基础信息",path:"/sys/base"},{id:23,name:"会员信息",path:"/sys/wxuser"}]},{id:13,name:"CRM",icon:"icon-jiaosequnti",path:"",subList:[{id:14,name:"待回访",path:"/crm/wvisit"},{id:21,name:"已回访",path:"/crm/avisit"},{id:16,name:"待入职",path:"/crm/wentry"},{id:17,name:"待返现",path:"/crm/cashback"},{id:18,name:"已完结",path:"/crm/end"},{id:19,name:"推荐用户",path:"/crm/recommend"},{id:20,name:"返现记录",path:"/crm/cashbacklist"}]},{id:7,name:"招工",icon:"icon-hezuoguanxi-xianxing",path:"/recruit",subList:[{id:8,name:"招工管理",path:"/recruit/list"},{id:22,name:"招工纠错",path:"/recruit/correction"}]}]},e4ky:function(e,t){},"hC+2":function(e,t){},"i+6q":function(e,t){},jbI1:function(e,t){},l6xR:function(e,t){},lRCo:function(e,t){},ltRB:function(e,t){},nOS3:function(e,t){},"oe1/":function(e,t){},q6K9:function(e,t){},q6aV:function(e,t){},rqNS:function(e,t){},u92O:function(e,t){},vtQK:function(e,t){},wvq3:function(e,t){},x2NK:function(e,t){},yysO:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.823fc868f1245ca9a6ea.js.map